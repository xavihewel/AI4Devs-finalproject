{"file":"/Users/admin/Documents/AI4Devs-finalproject/Frontend/src/components/matches/MatchCard.test.tsx","mappings":"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","names":[],"sources":["/Users/admin/Documents/AI4Devs-finalproject/Frontend/src/components/matches/MatchCard.test.tsx"],"sourcesContent":["import React from 'react';\nimport { render, screen, fireEvent } from '@testing-library/react';\nimport { I18nextProvider } from 'react-i18next';\nimport i18n from '../../i18n/config';\nimport MatchCard from './MatchCard';\nimport type { MatchDto } from '../../types/api';\n\nconst renderWithI18n = (component: React.ReactElement) => {\n  return render(\n    <I18nextProvider i18n={i18n}>\n      {component}\n    </I18nextProvider>\n  );\n};\n\nconst mockMatch: MatchDto = {\n  id: 'match-1',\n  tripId: 'trip-1',\n  driverId: 'driver-1',\n  score: 0.85,\n  status: 'PENDING',\n  origin: '40.4168,-3.7038',\n  destinationSedeId: 'SEDE-1',\n  dateTime: '2024-01-15T08:30:00Z',\n  seatsFree: 3,\n  reasons: ['Same route', 'Similar departure time'],\n  direction: 'TO_SEDE',\n  pairedTripId: null\n};\n\ndescribe('MatchCard', () => {\n  const mockOnBook = jest.fn();\n  const mockOnViewProfile = jest.fn();\n  const mockOnRate = jest.fn();\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('renders match information correctly', () => {\n    renderWithI18n(\n      <MatchCard\n        match={mockMatch}\n        onBook={mockOnBook}\n        onViewProfile={mockOnViewProfile}\n        onRate={mockOnRate}\n      />\n    );\n\n    expect(screen.getByText(/Viaje a/)).toBeInTheDocument();\n    expect(screen.getByText('40.4168,-3.7038')).toBeInTheDocument();\n    expect(screen.getByText('3')).toBeInTheDocument();\n    expect(screen.getByText('Same route')).toBeInTheDocument();\n    expect(screen.getByText('Similar departure time')).toBeInTheDocument();\n  });\n\n  it('shows score badge with correct color and label', () => {\n    renderWithI18n(\n      <MatchCard\n        match={mockMatch}\n        onBook={mockOnBook}\n        onViewProfile={mockOnViewProfile}\n        onRate={mockOnRate}\n      />\n    );\n\n    const scoreBadge = screen.getByText('Excelente');\n    expect(scoreBadge).toBeInTheDocument();\n    expect(scoreBadge.closest('span')).toHaveClass('text-green-600', 'bg-green-100');\n  });\n\n  it('shows booked status when isBooked is true', () => {\n    renderWithI18n(\n      <MatchCard\n        match={mockMatch}\n        isBooked={true}\n        onBook={mockOnBook}\n        onViewProfile={mockOnViewProfile}\n        onRate={mockOnRate}\n      />\n    );\n\n    expect(screen.getByText('Ya Reservado')).toBeInTheDocument();\n  });\n\n  it('disables book button when no seats available', () => {\n    const matchNoSeats = { ...mockMatch, seatsFree: 0 };\n    \n    renderWithI18n(\n      <MatchCard\n        match={matchNoSeats}\n        onBook={mockOnBook}\n        onViewProfile={mockOnViewProfile}\n        onRate={mockOnRate}\n      />\n    );\n\n    const bookButton = screen.getByText('Sin asientos disponibles');\n    expect(bookButton).toBeDisabled();\n  });\n\n  it('disables book button when already booked', () => {\n    renderWithI18n(\n      <MatchCard\n        match={mockMatch}\n        isBooked={true}\n        onBook={mockOnBook}\n        onViewProfile={mockOnViewProfile}\n        onRate={mockOnRate}\n      />\n    );\n\n    const bookButton = screen.getByText('Ya Reservado');\n    expect(bookButton).toBeDisabled();\n  });\n\n  it('shows loading state on book button when booking in progress', () => {\n    renderWithI18n(\n      <MatchCard\n        match={mockMatch}\n        isBookingInProgress={true}\n        onBook={mockOnBook}\n        onViewProfile={mockOnViewProfile}\n        onRate={mockOnRate}\n      />\n    );\n\n    const bookButton = screen.getByRole('button', { name: /book trip/i });\n    expect(bookButton).toBeDisabled();\n  });\n\n  it('calls onBook when book button is clicked', () => {\n    renderWithI18n(\n      <MatchCard\n        match={mockMatch}\n        onBook={mockOnBook}\n        onViewProfile={mockOnViewProfile}\n        onRate={mockOnRate}\n      />\n    );\n\n    const bookButton = screen.getByText('Book Trip');\n    fireEvent.click(bookButton);\n\n    expect(mockOnBook).toHaveBeenCalledWith(mockMatch);\n  });\n\n  it('calls onViewProfile when view profile button is clicked', () => {\n    renderWithI18n(\n      <MatchCard\n        match={mockMatch}\n        onBook={mockOnBook}\n        onViewProfile={mockOnViewProfile}\n        onRate={mockOnRate}\n      />\n    );\n\n    const viewProfileButton = screen.getByText('View Profile');\n    fireEvent.click(viewProfileButton);\n\n    expect(mockOnViewProfile).toHaveBeenCalledWith('driver-1');\n  });\n\n  it('calls onRate when rate button is clicked', () => {\n    renderWithI18n(\n      <MatchCard\n        match={mockMatch}\n        onBook={mockOnBook}\n        onViewProfile={mockOnViewProfile}\n        onRate={mockOnRate}\n      />\n    );\n\n    const rateButton = screen.getByText('Valorar');\n    fireEvent.click(rateButton);\n\n    expect(mockOnRate).toHaveBeenCalledWith('driver-1');\n  });\n\n  it('shows map toggle button when coordinates are valid', () => {\n    renderWithI18n(\n      <MatchCard\n        match={mockMatch}\n        onBook={mockOnBook}\n        onViewProfile={mockOnViewProfile}\n        onRate={mockOnRate}\n      />\n    );\n\n    expect(screen.getByText('Mostrar Mapa')).toBeInTheDocument();\n  });\n\n  it('toggles map visibility when show/hide map button is clicked', () => {\n    renderWithI18n(\n      <MatchCard\n        match={mockMatch}\n        onBook={mockOnBook}\n        onViewProfile={mockOnViewProfile}\n        onRate={mockOnRate}\n      />\n    );\n\n    const toggleButton = screen.getByText('Mostrar Mapa');\n    fireEvent.click(toggleButton);\n\n    expect(screen.getByText('Ocultar Mapa')).toBeInTheDocument();\n  });\n\n  it('does not show map section when coordinates are invalid', () => {\n    const matchInvalidCoords = { ...mockMatch, origin: 'invalid' };\n    \n    renderWithI18n(\n      <MatchCard\n        match={matchInvalidCoords}\n        onBook={mockOnBook}\n        onViewProfile={mockOnViewProfile}\n        onRate={mockOnRate}\n      />\n    );\n\n    expect(screen.queryByText('Show Map')).not.toBeInTheDocument();\n  });\n\n  it('displays date and time correctly', () => {\n    renderWithI18n(\n      <MatchCard\n        match={mockMatch}\n        onBook={mockOnBook}\n        onViewProfile={mockOnViewProfile}\n        onRate={mockOnRate}\n      />\n    );\n\n    // Check that date and time are displayed (format may vary by locale)\n    expect(screen.getByText(/2024/)).toBeInTheDocument();\n  });\n\n  it('shows compatibility reasons when available', () => {\n    renderWithI18n(\n      <MatchCard\n        match={mockMatch}\n        onBook={mockOnBook}\n        onViewProfile={mockOnViewProfile}\n        onRate={mockOnRate}\n      />\n    );\n\n    expect(screen.getByText('Razones de compatibilidad:')).toBeInTheDocument();\n    expect(screen.getByText('Same route')).toBeInTheDocument();\n    expect(screen.getByText('Similar departure time')).toBeInTheDocument();\n  });\n\n  it('does not show compatibility reasons when empty', () => {\n    const matchNoReasons = { ...mockMatch, reasons: [] };\n    \n    renderWithI18n(\n      <MatchCard\n        match={matchNoReasons}\n        onBook={mockOnBook}\n        onViewProfile={mockOnViewProfile}\n        onRate={mockOnRate}\n      />\n    );\n\n    expect(screen.queryByText('Compatibility reasons:')).not.toBeInTheDocument();\n  });\n});\n"],"version":3}