96c7df481811f45d05b07834cdb610c3
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.Navbar = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const react_router_dom_1 = require("react-router-dom");
const react_i18next_1 = require("react-i18next");
const AuthProvider_1 = require("../../auth/AuthProvider");
const ui_1 = require("../ui");
const LanguageSwitcher_1 = require("../LanguageSwitcher");
const Navbar = () => {
    const location = (0, react_router_dom_1.useLocation)();
    const { authenticated, login, logout } = (0, AuthProvider_1.useAuth)();
    const { t } = (0, react_i18next_1.useTranslation)('common');
    const [mobileMenuOpen, setMobileMenuOpen] = (0, react_1.useState)(false);
    const navItems = (0, react_1.useMemo)(() => [
        { path: '/', label: t('nav.home') },
        { path: '/trips', label: t('nav.trips'), requiresAuth: true },
        { path: '/matches', label: t('nav.search'), requiresAuth: true },
        { path: '/bookings', label: t('nav.bookings'), requiresAuth: true },
        { path: '/history', label: t('nav.history'), requiresAuth: true },
    ], [t]);
    const isActivePath = (path) => {
        if (path === '/') {
            return location.pathname === '/';
        }
        return location.pathname.startsWith(path);
    };
    return ((0, jsx_runtime_1.jsxs)("nav", { className: "bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50", children: [(0, jsx_runtime_1.jsx)("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between h-16", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-8", children: [(0, jsx_runtime_1.jsxs)(react_router_dom_1.Link, { to: "/", className: "flex items-center space-x-3 group", onClick: () => setMobileMenuOpen(false), children: [(0, jsx_runtime_1.jsx)("img", { src: "/logo.png", alt: "bon\u00C0reaGo", className: "h-10 w-auto transition-transform duration-200 group-hover:scale-105" }), (0, jsx_runtime_1.jsx)("span", { className: "text-xl font-bold text-gray-800 group-hover:text-primary-600 transition-colors duration-200", children: "bon\u00C0reaGo" })] }), (0, jsx_runtime_1.jsx)("div", { className: "hidden md:flex space-x-6", children: navItems.map((item) => {
                                        if (item.requiresAuth && !authenticated) {
                                            return null;
                                        }
                                        return ((0, jsx_runtime_1.jsx)(react_router_dom_1.Link, { to: item.path, className: `px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${isActivePath(item.path)
                                                ? 'bg-primary-100 text-primary-700'
                                                : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'}`, children: item.label }, item.path));
                                    }) })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-4", children: [(0, jsx_runtime_1.jsx)("div", { className: "hidden md:block", children: (0, jsx_runtime_1.jsx)(LanguageSwitcher_1.LanguageSwitcher, {}) }), (0, jsx_runtime_1.jsx)("div", { className: "hidden md:flex items-center space-x-4", children: authenticated ? ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(react_router_dom_1.Link, { to: "/me", className: `px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${isActivePath('/me')
                                                    ? 'bg-primary-100 text-primary-700'
                                                    : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'}`, children: t('nav.profile') }), (0, jsx_runtime_1.jsx)(ui_1.Button, { variant: "secondary", size: "sm", onClick: logout, children: t('actions.logout') })] })) : ((0, jsx_runtime_1.jsx)(ui_1.Button, { variant: "primary", size: "sm", onClick: login, children: t('actions.login') })) }), (0, jsx_runtime_1.jsxs)("button", { type: "button", className: "md:hidden inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500", onClick: () => setMobileMenuOpen(!mobileMenuOpen), "aria-expanded": mobileMenuOpen, children: [(0, jsx_runtime_1.jsx)("span", { className: "sr-only", children: t('actions.openMenu') }), mobileMenuOpen ? (
                                        // Icono X
                                        (0, jsx_runtime_1.jsx)("svg", { className: "block h-6 w-6", fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", children: (0, jsx_runtime_1.jsx)("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M6 18L18 6M6 6l12 12" }) })) : (
                                        // Icono hamburger
                                        (0, jsx_runtime_1.jsx)("svg", { className: "block h-6 w-6", fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", children: (0, jsx_runtime_1.jsx)("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" }) }))] })] })] }) }), mobileMenuOpen && ((0, jsx_runtime_1.jsx)("div", { className: "md:hidden border-t border-gray-200", children: (0, jsx_runtime_1.jsxs)("div", { className: "px-2 pt-2 pb-3 space-y-1", children: [navItems.map((item) => {
                            if (item.requiresAuth && !authenticated) {
                                return null;
                            }
                            return ((0, jsx_runtime_1.jsx)(react_router_dom_1.Link, { to: item.path, className: `block px-3 py-2 rounded-md text-base font-medium ${isActivePath(item.path)
                                    ? 'bg-primary-100 text-primary-700'
                                    : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'}`, onClick: () => setMobileMenuOpen(false), children: item.label }, item.path));
                        }), (0, jsx_runtime_1.jsx)("div", { className: "px-3 py-2", children: (0, jsx_runtime_1.jsx)(LanguageSwitcher_1.LanguageSwitcher, {}) }), authenticated && ((0, jsx_runtime_1.jsx)(react_router_dom_1.Link, { to: "/me", className: `block px-3 py-2 rounded-md text-base font-medium ${isActivePath('/me')
                                ? 'bg-primary-100 text-primary-700'
                                : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'}`, onClick: () => setMobileMenuOpen(false), children: t('nav.profile') })), (0, jsx_runtime_1.jsx)("div", { className: "px-3 py-2", children: authenticated ? ((0, jsx_runtime_1.jsx)(ui_1.Button, { variant: "secondary", className: "w-full", onClick: () => {
                                    logout();
                                    setMobileMenuOpen(false);
                                }, children: t('actions.logout') })) : ((0, jsx_runtime_1.jsx)(ui_1.Button, { variant: "primary", className: "w-full", onClick: () => {
                                    login();
                                    setMobileMenuOpen(false);
                                }, children: t('actions.login') })) })] }) }))] }));
};
exports.Navbar = Navbar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2FkbWluL0RvY3VtZW50cy9BSTREZXZzLWZpbmFscHJvamVjdC9Gcm9udGVuZC9zcmMvY29tcG9uZW50cy9sYXlvdXQvTmF2YmFyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsK0NBQWlEO0FBQ2pELHVEQUFxRDtBQUNyRCxpREFBK0M7QUFDL0MsMERBQWtEO0FBQ2xELDhCQUErQjtBQUMvQiwwREFBdUQ7QUFFaEQsTUFBTSxNQUFNLEdBQWEsR0FBRyxFQUFFO0lBQ25DLE1BQU0sUUFBUSxHQUFHLElBQUEsOEJBQVcsR0FBRSxDQUFDO0lBQy9CLE1BQU0sRUFBRSxhQUFhLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUEsc0JBQU8sR0FBRSxDQUFDO0lBQ25ELE1BQU0sRUFBRSxDQUFDLEVBQUUsR0FBRyxJQUFBLDhCQUFjLEVBQUMsUUFBUSxDQUFDLENBQUM7SUFDdkMsTUFBTSxDQUFDLGNBQWMsRUFBRSxpQkFBaUIsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxLQUFLLENBQUMsQ0FBQztJQUU1RCxNQUFNLFFBQVEsR0FBRyxJQUFBLGVBQU8sRUFBQyxHQUFHLEVBQUUsQ0FBQztRQUM3QixFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsRUFBRTtRQUNuQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFO1FBQzdELEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUU7UUFDaEUsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUMsY0FBYyxDQUFDLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRTtRQUNuRSxFQUFFLElBQUksRUFBRSxV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ZXZzLWZpbmFscHJvamVjdC9Gcm9udGVuZC9zcmMvY29tcG9uZW50cy9sYXlvdXQvTmF2YmFyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBMaW5rLCB1c2VMb2NhdGlvbiB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0JztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICcuLi8uLi9hdXRoL0F1dGhQcm92aWRlcic7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICcuLi91aSc7XG5pbXBvcnQgeyBMYW5ndWFnZVN3aXRjaGVyIH0gZnJvbSAnLi4vTGFuZ3VhZ2VTd2l0Y2hlcic7XG5cbmV4cG9ydCBjb25zdCBOYXZiYXI6IFJlYWN0LkZDID0gKCkgPT4ge1xuICBjb25zdCBsb2NhdGlvbiA9IHVzZUxvY2F0aW9uKCk7XG4gIGNvbnN0IHsgYXV0aGVudGljYXRlZCwgbG9naW4sIGxvZ291dCB9ID0gdXNlQXV0aCgpO1xuICBjb25zdCB7IHQgfSA9IHVzZVRyYW5zbGF0aW9uKCdjb21tb24nKTtcbiAgY29uc3QgW21vYmlsZU1lbnVPcGVuLCBzZXRNb2JpbGVNZW51T3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIFxuICBjb25zdCBuYXZJdGVtcyA9IHVzZU1lbW8oKCkgPT4gW1xuICAgIHsgcGF0aDogJy8nLCBsYWJlbDogdCgnbmF2LmhvbWUnKSB9LFxuICAgIHsgcGF0aDogJy90cmlwcycsIGxhYmVsOiB0KCduYXYudHJpcHMnKSwgcmVxdWlyZXNBdXRoOiB0cnVlIH0sXG4gICAgeyBwYXRoOiAnL21hdGNoZXMnLCBsYWJlbDogdCgnbmF2LnNlYXJjaCcpLCByZXF1aXJlc0F1dGg6IHRydWUgfSxcbiAgICB7IHBhdGg6ICcvYm9va2luZ3MnLCBsYWJlbDogdCgnbmF2LmJvb2tpbmdzJyksIHJlcXVpcmVzQXV0aDogdHJ1ZSB9LFxuICAgIHsgcGF0aDogJy9oaXN0b3J5JywgbGFiZWw6IHQoJ25hdi5oaXN0b3J5JyksIHJlcXVpcmVzQXV0aDogdHJ1ZSB9LFxuICBdLCBbdF0pO1xuICBcbiAgY29uc3QgaXNBY3RpdmVQYXRoID0gKHBhdGg6IHN0cmluZykgPT4ge1xuICAgIGlmIChwYXRoID09PSAnLycpIHtcbiAgICAgIHJldHVybiBsb2NhdGlvbi5wYXRobmFtZSA9PT0gJy8nO1xuICAgIH1cbiAgICByZXR1cm4gbG9jYXRpb24ucGF0aG5hbWUuc3RhcnRzV2l0aChwYXRoKTtcbiAgfTtcbiAgXG4gIHJldHVybiAoXG4gICAgPG5hdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBzaGFkb3ctc20gYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwIHN0aWNreSB0b3AtMCB6LTUwXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1heC13LTd4bCBteC1hdXRvIHB4LTQgc206cHgtNiBsZzpweC04XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaC0xNlwiPlxuICAgICAgICAgIHsvKiBMb2dvIHkgbWVuw7ogZGVza3RvcCAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtOFwiPlxuICAgICAgICAgICAgPExpbmtcbiAgICAgICAgICAgICAgdG89XCIvXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0zIGdyb3VwXCJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0TW9iaWxlTWVudU9wZW4oZmFsc2UpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8aW1nIFxuICAgICAgICAgICAgICAgIHNyYz1cIi9sb2dvLnBuZ1wiIFxuICAgICAgICAgICAgICAgIGFsdD1cImJvbsOAcmVhR29cIiBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTEwIHctYXV0byB0cmFuc2l0aW9uLXRyYW5zZm9ybSBkdXJhdGlvbi0yMDAgZ3JvdXAtaG92ZXI6c2NhbGUtMTA1XCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14bCBmb250LWJvbGQgdGV4dC1ncmF5LTgwMCBncm91cC1ob3Zlcjp0ZXh0LXByaW1hcnktNjAwIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTIwMFwiPlxuICAgICAgICAgICAgICAgIGJvbsOAcmVhR29cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgXG4gICAgICAgICAgICB7LyogTWVuw7ogRGVza3RvcCAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGlkZGVuIG1kOmZsZXggc3BhY2UteC02XCI+XG4gICAgICAgICAgICAgIHtuYXZJdGVtcy5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5yZXF1aXJlc0F1dGggJiYgIWF1dGhlbnRpY2F0ZWQpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgPExpbmtcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpdGVtLnBhdGh9XG4gICAgICAgICAgICAgICAgICAgIHRvPXtpdGVtLnBhdGh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTMgcHktMiByb3VuZGVkLW1kIHRleHQtc20gZm9udC1tZWRpdW0gdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwICR7XG4gICAgICAgICAgICAgICAgICAgICAgaXNBY3RpdmVQYXRoKGl0ZW0ucGF0aClcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLXByaW1hcnktMTAwIHRleHQtcHJpbWFyeS03MDAnXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICd0ZXh0LWdyYXktNTAwIGhvdmVyOnRleHQtZ3JheS03MDAgaG92ZXI6YmctZ3JheS0xMDAnXG4gICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7aXRlbS5sYWJlbH1cbiAgICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIHsvKiBCb3RvbmVzIGRlIGF1dGVudGljYWNpw7NuIChkZXNrdG9wKSB5IGJvdMOzbiBoYW1idXJnZXIgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTRcIj5cbiAgICAgICAgICAgIHsvKiBMYW5ndWFnZSBTd2l0Y2hlciAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGlkZGVuIG1kOmJsb2NrXCI+XG4gICAgICAgICAgICAgIDxMYW5ndWFnZVN3aXRjaGVyIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgey8qIEJvdG9uZXMgZGUgYXV0ZW50aWNhY2nDs24gLSBEZXNrdG9wICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoaWRkZW4gbWQ6ZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC00XCI+XG4gICAgICAgICAgICAgIHthdXRoZW50aWNhdGVkID8gKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICA8TGlua1xuICAgICAgICAgICAgICAgICAgICB0bz1cIi9tZVwiXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTMgcHktMiByb3VuZGVkLW1kIHRleHQtc20gZm9udC1tZWRpdW0gdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwICR7XG4gICAgICAgICAgICAgICAgICAgICAgaXNBY3RpdmVQYXRoKCcvbWUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyAnYmctcHJpbWFyeS0xMDAgdGV4dC1wcmltYXJ5LTcwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJ3RleHQtZ3JheS01MDAgaG92ZXI6dGV4dC1ncmF5LTcwMCBob3ZlcjpiZy1ncmF5LTEwMCdcbiAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHt0KCduYXYucHJvZmlsZScpfVxuICAgICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17bG9nb3V0fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7dCgnYWN0aW9ucy5sb2dvdXQnKX1cbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtsb2dpbn1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7dCgnYWN0aW9ucy5sb2dpbicpfVxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHsvKiBCb3TDs24gSGFtYnVyZ2VyIC0gTW9iaWxlICovfVxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWQ6aGlkZGVuIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTIgcm91bmRlZC1tZCB0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS01MDAgaG92ZXI6YmctZ3JheS0xMDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWluc2V0IGZvY3VzOnJpbmctcHJpbWFyeS01MDBcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRNb2JpbGVNZW51T3BlbighbW9iaWxlTWVudU9wZW4pfVxuICAgICAgICAgICAgICBhcmlhLWV4cGFuZGVkPXttb2JpbGVNZW51T3Blbn1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic3Itb25seVwiPnt0KCdhY3Rpb25zLm9wZW5NZW51Jyl9PC9zcGFuPlxuICAgICAgICAgICAgICB7bW9iaWxlTWVudU9wZW4gPyAoXG4gICAgICAgICAgICAgICAgLy8gSWNvbm8gWFxuICAgICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwiYmxvY2sgaC02IHctNlwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZVdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgZD1cIk02IDE4TDE4IDZNNiA2bDEyIDEyXCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAvLyBJY29ubyBoYW1idXJnZXJcbiAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cImJsb2NrIGgtNiB3LTZcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2VXaWR0aD1cIjEuNVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIGQ9XCJNMy43NSA2Ljc1aDE2LjVNMy43NSAxMmgxNi41bS0xNi41IDUuMjVoMTYuNVwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIE1lbsO6IE1vYmlsZSAqL31cbiAgICAgIHttb2JpbGVNZW51T3BlbiAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWQ6aGlkZGVuIGJvcmRlci10IGJvcmRlci1ncmF5LTIwMFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtMiBwdC0yIHBiLTMgc3BhY2UteS0xXCI+XG4gICAgICAgICAgICB7bmF2SXRlbXMubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChpdGVtLnJlcXVpcmVzQXV0aCAmJiAhYXV0aGVudGljYXRlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxMaW5rXG4gICAgICAgICAgICAgICAgICBrZXk9e2l0ZW0ucGF0aH1cbiAgICAgICAgICAgICAgICAgIHRvPXtpdGVtLnBhdGh9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BibG9jayBweC0zIHB5LTIgcm91bmRlZC1tZCB0ZXh0LWJhc2UgZm9udC1tZWRpdW0gJHtcbiAgICAgICAgICAgICAgICAgICAgaXNBY3RpdmVQYXRoKGl0ZW0ucGF0aClcbiAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1wcmltYXJ5LTEwMCB0ZXh0LXByaW1hcnktNzAwJ1xuICAgICAgICAgICAgICAgICAgICAgIDogJ3RleHQtZ3JheS01MDAgaG92ZXI6dGV4dC1ncmF5LTcwMCBob3ZlcjpiZy1ncmF5LTEwMCdcbiAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0TW9iaWxlTWVudU9wZW4oZmFsc2UpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHtpdGVtLmxhYmVsfVxuICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB7LyogTGFuZ3VhZ2UgU3dpdGNoZXIgLSBNb2JpbGUgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTMgcHktMlwiPlxuICAgICAgICAgICAgICA8TGFuZ3VhZ2VTd2l0Y2hlciAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHsvKiBQZXJmaWwgeSBhdXRlbnRpY2FjacOzbiBlbiBtw7N2aWwgKi99XG4gICAgICAgICAgICB7YXV0aGVudGljYXRlZCAmJiAoXG4gICAgICAgICAgICAgIDxMaW5rXG4gICAgICAgICAgICAgICAgdG89XCIvbWVcIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGJsb2NrIHB4LTMgcHktMiByb3VuZGVkLW1kIHRleHQtYmFzZSBmb250LW1lZGl1bSAke1xuICAgICAgICAgICAgICAgICAgaXNBY3RpdmVQYXRoKCcvbWUnKVxuICAgICAgICAgICAgICAgICAgICA/ICdiZy1wcmltYXJ5LTEwMCB0ZXh0LXByaW1hcnktNzAwJ1xuICAgICAgICAgICAgICAgICAgICA6ICd0ZXh0LWdyYXktNTAwIGhvdmVyOnRleHQtZ3JheS03MDAgaG92ZXI6YmctZ3JheS0xMDAnXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0TW9iaWxlTWVudU9wZW4oZmFsc2UpfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3QoJ25hdi5wcm9maWxlJyl9XG4gICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtMyBweS0yXCI+XG4gICAgICAgICAgICAgIHthdXRoZW50aWNhdGVkID8gKFxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbG9nb3V0KCk7XG4gICAgICAgICAgICAgICAgICAgIHNldE1vYmlsZU1lbnVPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge3QoJ2FjdGlvbnMubG9nb3V0Jyl9XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdmFyaWFudD1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbG9naW4oKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0TW9iaWxlTWVudU9wZW4oZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7dCgnYWN0aW9ucy5sb2dpbicpfVxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L25hdj5cbiAgKTtcbn07XG4iXSwidmVyc2lvbiI6M30=