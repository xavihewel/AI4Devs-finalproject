{"file":"/Users/admin/Documents/AI4Devs-finalproject/Frontend/src/api/notifications.test.ts","mappings":";;AAAA,mDAAoF;AAEpF,QAAQ,CAAC,mBAAmB,EAAE,GAAG,EAAE;IACjC,UAAU,CAAC,GAAG,EAAE;QACb,MAAc,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,EAAS,CAAC,CAAC;QACvH,MAAc,CAAC,IAAI,GAAG,CAAC,GAAW,EAAE,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QACrF,MAAc,CAAC,IAAI,GAAG,CAAC,GAAW,EAAE,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QACrF,MAAc,CAAC,MAAM,GAAG,SAAS,CAAC;QAClC,MAAc,CAAC,MAAM,GAAG,EAAS,CAAC;QAClC,MAAc,CAAC,SAAS,GAAG,EAAS,CAAC;QACtC,OAAO,CAAC,GAAG,CAAC,qBAAqB,GAAG,uBAAuB,CAAC;IAC9D,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,qCAAqC,EAAE,KAAK,IAAI,EAAE;QACnD,MAAM,OAAO,GAAG,EAAE,QAAQ,EAAE,0BAA0B,EAAE,SAAS,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC;QACvF,MAAM,IAAA,6BAAa,EAAC,OAAO,CAAC,CAAC;QAC7B,MAAM,CAAE,MAAc,CAAC,KAAK,CAAC,CAAC,gBAAgB,EAAE,CAAC;QACjD,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,GAAK,MAAc,CAAC,KAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACvE,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,0BAA0B,CAAC,CAAC;QAC1D,MAAM,CAAE,IAAY,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC5C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,kCAAkC,EAAE,KAAK,IAAI,EAAE;QAChD,MAAM,IAAA,+BAAe,EAAC,0BAA0B,CAAC,CAAC;QAClD,MAAM,CAAE,MAAc,CAAC,KAAK,CAAC,CAAC,gBAAgB,EAAE,CAAC;QACjD,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,GAAK,MAAc,CAAC,KAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACvE,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,sCAAsC,CAAC,CAAC;QACtE,MAAM,CAAE,IAAY,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,qBAAqB,EAAE,KAAK,IAAI,EAAE;QACnC,MAAM,IAAA,iCAAiB,GAAE,CAAC;QAC1B,MAAM,CAAE,MAAc,CAAC,KAAK,CAAC,CAAC,gBAAgB,EAAE,CAAC;QACjD,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,GAAK,MAAc,CAAC,KAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACvE,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,8BAA8B,CAAC,CAAC;QAC9D,MAAM,CAAE,IAAY,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC3C,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["/Users/admin/Documents/AI4Devs-finalproject/Frontend/src/api/notifications.test.ts"],"sourcesContent":["import { subscribePush, unsubscribePush, listSubscriptions } from './notifications';\n\ndescribe('notifications api', () => {\n  beforeEach(() => {\n    (global as any).fetch = jest.fn().mockResolvedValue({ ok: true, status: 200, json: async () => ({ ok: true }) } as any);\n    (global as any).atob = (b64: string) => Buffer.from(b64, 'base64').toString('binary');\n    (global as any).btoa = (bin: string) => Buffer.from(bin, 'binary').toString('base64');\n    (global as any).import = undefined;\n    (global as any).window = {} as any;\n    (global as any).navigator = {} as any;\n    process.env.VITE_VAPID_PUBLIC_KEY = 'BHVapidKeyFake_______';\n  });\n\n  it('posts subscription payload directly', async () => {\n    const payload = { endpoint: 'https://push.example/sub', p256dhKey: 'p', authKey: 'a' };\n    await subscribePush(payload);\n    expect((global as any).fetch).toHaveBeenCalled();\n    const [url, init] = ((global as any).fetch as jest.Mock).mock.calls[0];\n    expect(String(url)).toContain('/notifications/subscribe');\n    expect((init as any).method).toBe('POST');\n  });\n\n  it('deletes subscription by endpoint', async () => {\n    await unsubscribePush('https://push.example/sub');\n    expect((global as any).fetch).toHaveBeenCalled();\n    const [url, init] = ((global as any).fetch as jest.Mock).mock.calls[0];\n    expect(String(url)).toContain('/notifications/unsubscribe?endpoint=');\n    expect((init as any).method).toBe('DELETE');\n  });\n\n  it('lists subscriptions', async () => {\n    await listSubscriptions();\n    expect((global as any).fetch).toHaveBeenCalled();\n    const [url, init] = ((global as any).fetch as jest.Mock).mock.calls[0];\n    expect(String(url)).toContain('/notifications/subscriptions');\n    expect((init as any).method).toBe('GET');\n  });\n});\n\n\n"],"version":3}