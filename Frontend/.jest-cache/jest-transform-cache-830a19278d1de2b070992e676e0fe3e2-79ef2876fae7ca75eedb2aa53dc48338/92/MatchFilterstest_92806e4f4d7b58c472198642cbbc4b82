69821d86dd7df8a537aa01491a7cab09
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importDefault(require("react"));
const react_2 = require("@testing-library/react");
const react_i18next_1 = require("react-i18next");
const config_1 = __importDefault(require("../../i18n/config"));
const MatchFilters_1 = __importDefault(require("./MatchFilters"));
const renderWithI18n = (component) => {
    return (0, react_2.render)((0, jsx_runtime_1.jsx)(react_i18next_1.I18nextProvider, { i18n: config_1.default, children: component }));
};
const mockMatches = [
    {
        id: 'match-1',
        tripId: 'trip-1',
        driverId: 'driver-1',
        score: 0.9,
        status: 'PENDING',
        origin: '40.4168,-3.7038',
        destinationSedeId: 'SEDE-1',
        dateTime: '2024-01-15T08:30:00Z',
        seatsFree: 4,
        reasons: ['Same route'],
        direction: 'TO_SEDE',
        pairedTripId: null
    },
    {
        id: 'match-2',
        tripId: 'trip-2',
        driverId: 'driver-2',
        score: 0.6,
        status: 'PENDING',
        origin: '40.4200,-3.7000',
        destinationSedeId: 'SEDE-1',
        dateTime: '2024-01-15T09:00:00Z',
        seatsFree: 2,
        reasons: ['Similar time'],
        direction: 'TO_SEDE',
        pairedTripId: null
    },
    {
        id: 'match-3',
        tripId: 'trip-3',
        driverId: 'driver-3',
        score: 0.3,
        status: 'PENDING',
        origin: '40.4100,-3.7100',
        destinationSedeId: 'SEDE-1',
        dateTime: '2024-01-16T08:00:00Z',
        seatsFree: 1,
        reasons: ['Different route'],
        direction: 'TO_SEDE',
        pairedTripId: null
    }
];
describe('MatchFilters', () => {
    const mockOnFilteredMatches = jest.fn();
    const mockOnFiltersChange = jest.fn();
    beforeEach(() => {
        jest.clearAllMocks();
        // Clear localStorage before each test
        localStorage.clear();
    });
    it('renders filter controls correctly', () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchFilters_1.default, { matches: mockMatches, onFilteredMatches: mockOnFilteredMatches, onFiltersChange: mockOnFiltersChange }));
        expect(react_2.screen.getByText('Filter Results')).toBeInTheDocument();
        expect(react_2.screen.getByText('Minimum Score')).toBeInTheDocument();
        expect(react_2.screen.getByText('Minimum Seats')).toBeInTheDocument();
        expect(react_2.screen.getByText('From Date')).toBeInTheDocument();
        expect(react_2.screen.getByText('To Date')).toBeInTheDocument();
        expect(react_2.screen.getByText('Sort By')).toBeInTheDocument();
        expect(react_2.screen.getByText('Order')).toBeInTheDocument();
    });
    it('applies score filter correctly', async () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchFilters_1.default, { matches: mockMatches, onFilteredMatches: mockOnFilteredMatches, onFiltersChange: mockOnFiltersChange }));
        const scoreSlider = react_2.screen.getByRole('slider');
        react_2.fireEvent.change(scoreSlider, { target: { value: '70' } });
        await (0, react_2.waitFor)(() => {
            expect(mockOnFilteredMatches).toHaveBeenCalledWith(expect.arrayContaining([
                expect.objectContaining({ score: 0.9 })
            ]));
        });
    });
    it('applies seats filter correctly', async () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchFilters_1.default, { matches: mockMatches, onFilteredMatches: mockOnFilteredMatches, onFiltersChange: mockOnFiltersChange }));
        const seatsSelect = react_2.screen.getByDisplayValue('1 seat');
        react_2.fireEvent.change(seatsSelect, { target: { value: '3' } });
        await (0, react_2.waitFor)(() => {
            expect(mockOnFilteredMatches).toHaveBeenCalledWith(expect.arrayContaining([
                expect.objectContaining({ seatsFree: 4 })
            ]));
        });
    });
    it('applies date filters correctly', async () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchFilters_1.default, { matches: mockMatches, onFilteredMatches: mockOnFilteredMatches, onFiltersChange: mockOnFiltersChange }));
        const dateFromInput = react_2.screen.getByLabelText('From Date');
        react_2.fireEvent.change(dateFromInput, { target: { value: '2024-01-15' } });
        await (0, react_2.waitFor)(() => {
            expect(mockOnFilteredMatches).toHaveBeenCalledWith(expect.arrayContaining([
                expect.objectContaining({ dateTime: '2024-01-15T08:30:00Z' }),
                expect.objectContaining({ dateTime: '2024-01-15T09:00:00Z' })
            ]));
        });
    });
    it('sorts by score correctly', async () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchFilters_1.default, { matches: mockMatches, onFilteredMatches: mockOnFilteredMatches, onFiltersChange: mockOnFiltersChange }));
        const sortBySelect = react_2.screen.getByDisplayValue('Score');
        react_2.fireEvent.change(sortBySelect, { target: { value: 'score' } });
        await (0, react_2.waitFor)(() => {
            const filteredMatches = mockOnFilteredMatches.mock.calls[0][0];
            expect(filteredMatches[0].score).toBeGreaterThanOrEqual(filteredMatches[1].score);
        });
    });
    it('sorts by date correctly', async () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchFilters_1.default, { matches: mockMatches, onFilteredMatches: mockOnFilteredMatches, onFiltersChange: mockOnFiltersChange }));
        const sortBySelect = react_2.screen.getByDisplayValue('Score');
        react_2.fireEvent.change(sortBySelect, { target: { value: 'date' } });
        await (0, react_2.waitFor)(() => {
            const filteredMatches = mockOnFilteredMatches.mock.calls[0][0];
            const date1 = new Date(filteredMatches[0].dateTime);
            const date2 = new Date(filteredMatches[1].dateTime);
            expect(date1.getTime()).toBeLessThanOrEqual(date2.getTime());
        });
    });
    it('sorts by seats correctly', async () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchFilters_1.default, { matches: mockMatches, onFilteredMatches: mockOnFilteredMatches, onFiltersChange: mockOnFiltersChange }));
        const sortBySelect = react_2.screen.getByDisplayValue('Score');
        react_2.fireEvent.change(sortBySelect, { target: { value: 'seats' } });
        await (0, react_2.waitFor)(() => {
            const filteredMatches = mockOnFilteredMatches.mock.calls[0][0];
            expect(filteredMatches[0].seatsFree).toBeGreaterThanOrEqual(filteredMatches[1].seatsFree);
        });
    });
    it('changes sort order correctly', async () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchFilters_1.default, { matches: mockMatches, onFilteredMatches: mockOnFilteredMatches, onFiltersChange: mockOnFiltersChange }));
        const sortOrderSelect = react_2.screen.getByDisplayValue('Descending');
        react_2.fireEvent.change(sortOrderSelect, { target: { value: 'asc' } });
        await (0, react_2.waitFor)(() => {
            expect(mockOnFiltersChange).toHaveBeenCalledWith(expect.objectContaining({ sortOrder: 'asc' }));
        });
    });
    it('shows active filter count', async () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchFilters_1.default, { matches: mockMatches, onFilteredMatches: mockOnFilteredMatches, onFiltersChange: mockOnFiltersChange }));
        const scoreSlider = react_2.screen.getByRole('slider');
        react_2.fireEvent.change(scoreSlider, { target: { value: '50' } });
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.getByTestId('active-count')).toBeInTheDocument();
        });
    });
    it('shows filter chips for active filters', async () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchFilters_1.default, { matches: mockMatches, onFilteredMatches: mockOnFilteredMatches, onFiltersChange: mockOnFiltersChange }));
        const scoreSlider = react_2.screen.getByRole('slider');
        react_2.fireEvent.change(scoreSlider, { target: { value: '50' } });
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.getByTestId('score-chip')).toBeInTheDocument();
        });
    });
    it('removes filter chips when clicked', async () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchFilters_1.default, { matches: mockMatches, onFilteredMatches: mockOnFilteredMatches, onFiltersChange: mockOnFiltersChange }));
        const scoreSlider = react_2.screen.getByRole('slider');
        react_2.fireEvent.change(scoreSlider, { target: { value: '50' } });
        await (0, react_2.waitFor)(() => {
            const chip = react_2.screen.getByTestId('score-chip');
            const removeButton = chip.querySelector('button');
            react_2.fireEvent.click(removeButton);
        });
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.queryByTestId('score-chip')).not.toBeInTheDocument();
        });
    });
    it('clears all filters when clear button is clicked', async () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchFilters_1.default, { matches: mockMatches, onFilteredMatches: mockOnFilteredMatches, onFiltersChange: mockOnFiltersChange }));
        const scoreSlider = react_2.screen.getByRole('slider');
        react_2.fireEvent.change(scoreSlider, { target: { value: '50' } });
        await (0, react_2.waitFor)(() => {
            const clearButton = react_2.screen.getByTestId('clear-filters');
            react_2.fireEvent.click(clearButton);
        });
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.queryByTestId('score-chip')).not.toBeInTheDocument();
        });
    });
    it('persists filters to localStorage', async () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchFilters_1.default, { matches: mockMatches, onFilteredMatches: mockOnFilteredMatches, onFiltersChange: mockOnFiltersChange }));
        const scoreSlider = react_2.screen.getByRole('slider');
        react_2.fireEvent.change(scoreSlider, { target: { value: '70' } });
        await (0, react_2.waitFor)(() => {
            const savedFilters = localStorage.getItem('matchFilters');
            expect(savedFilters).toBeTruthy();
            const parsed = JSON.parse(savedFilters);
            expect(parsed.minScore).toBe(70);
        });
    });
    it('loads filters from localStorage on mount', () => {
        const savedFilters = {
            minScore: 60,
            minSeats: 2,
            dateFrom: '2024-01-15',
            dateTo: '',
            sortBy: 'score',
            sortOrder: 'desc'
        };
        localStorage.setItem('matchFilters', JSON.stringify(savedFilters));
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchFilters_1.default, { matches: mockMatches, onFilteredMatches: mockOnFilteredMatches, onFiltersChange: mockOnFiltersChange }));
        expect(react_2.screen.getByDisplayValue('60')).toBeInTheDocument();
    });
    it('handles invalid localStorage data gracefully', () => {
        localStorage.setItem('matchFilters', 'invalid json');
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchFilters_1.default, { matches: mockMatches, onFilteredMatches: mockOnFilteredMatches, onFiltersChange: mockOnFiltersChange }));
        // Should not crash and should use default values
        expect(react_2.screen.getByDisplayValue('0')).toBeInTheDocument();
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2FkbWluL0RvY3VtZW50cy9BSTREZXZzLWZpbmFscHJvamVjdC9Gcm9udGVuZC9zcmMvY29tcG9uZW50cy9tYXRjaGVzL01hdGNoRmlsdGVycy50ZXN0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxrREFBMEI7QUFDMUIsa0RBQTRFO0FBQzVFLGlEQUFnRDtBQUNoRCwrREFBcUM7QUFDckMsa0VBQTZEO0FBRzdELE1BQU0sY0FBYyxHQUFHLENBQUMsU0FBNkIsRUFBRSxFQUFFO0lBQ3ZELE9BQU8sSUFBQSxjQUFNLEVBQ1gsdUJBQUMsK0JBQWUsSUFBQyxJQUFJLEVBQUUsZ0JBQUksWUFDeEIsU0FBUyxHQUNNLENBQ25CLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRixNQUFNLFdBQVcsR0FBZTtJQUM5QjtRQUNFLEVBQUUsRUFBRSxTQUFTO1FBQ2IsTUFBTSxFQUFFLFFBQVE7UUFDaEIsUUFBUSxFQUFFLFVBQVU7UUFDcEIsS0FBSyxFQUFFLEdBQUc7UUFDVixNQUFNLEVBQUUsU0FBUztRQUNqQixNQUFNLEVBQUUsaUJBQWlCO1FBQ3pCLGlCQUFpQixFQUFFLFFBQVE7UUFDM0IsUUFBUSxFQUFFLHNCQUFzQjtRQUNoQyxTQUFTLEVBQUUsQ0FBQztRQUNaLE9BQU8sRUFBRSxDQUFDLFlBQVksQ0FBQztRQUN2QixTQUFTLEVBQUUsU0FBUztRQUNwQixZQUFZLEVBQUUsSUFBSTtLQUNuQjtJQUNEO1FBQ0UsRUFBRSxFQUFFLFNBQVM7UUFDYixNQUFNLEVBQUUsUUFBUTtRQUNoQixRQUFRLEVBQUUsVUFBVTtRQUNwQixLQUFLLEVBQUUsR0FBRztRQUNWLE1BQU0sRUFBRSxTQUFTO1FBQ2pCLE1BQU0sRUFBRSxpQkFBaUI7UUFDekIsaUJBQWlCLEVBQUUsUUFBUTtRQUMzQixRQUFRLEVBQUUsc0JBQXNCO1FBQ2hDLFNBQVMsRUFBRSxDQUFDO1FBQ1osT0FBTyxFQUFFLENBQUMsY0FBYyxDQUFDO1FBQ3pCLFNBQVMsRUFBRSxTQUFTO1FBQ3BCLFlBQVksRUFBRSxJQUFJO0tB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O1lBQ3RCLE1BQU0sRUFBRSxFQUFFO1lBQ1YsTUFBTSxFQUFFLE9BQU87WUFDZixTQUFTLEVBQUUsTUFBTTtTQUNsQixDQUFDO1FBQ0YsWUFBWSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBRW5FLGNBQWMsQ0FDWix1QkFBQyxzQkFBWSxJQUNYLE9BQU8sRUFBRSxXQUFXLEVBQ3BCLGlCQUFpQixFQUFFLHFCQUFxQixFQUN4QyxlQUFlLEVBQUUsbUJBQW1CLEdBQ3BDLENBQ0gsQ0FBQztRQUVGLE1BQU0sQ0FBQyxjQUFNLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBQzdELENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLDhDQUE4QyxFQUFFLEdBQUcsRUFBRTtRQUN0RCxZQUFZLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxjQUFjLENBQUMsQ0FBQztRQUVyRCxjQUFjLENBQ1osdUJBQUMsc0JBQVksSUFDWCxPQUFPLEVBQUUsV0FBVyxFQUNwQixpQkFBaUIsRUFBRSxxQkFBcUIsRUFDeEMsZUFBZSxFQUFFLG1CQUFtQixHQUNwQyxDQUNILENBQUM7UUFFRixpREFBaUQ7UUFDakQsTUFBTSxDQUFDLGNBQU0sQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7SUFDNUQsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvYWRtaW4vRG9jdW1lbnRzL0FJNERldnMtZmluYWxwcm9qZWN0L0Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21hdGNoZXMvTWF0Y2hGaWx0ZXJzLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBJMThuZXh0UHJvdmlkZXIgfSBmcm9tICdyZWFjdC1pMThuZXh0JztcbmltcG9ydCBpMThuIGZyb20gJy4uLy4uL2kxOG4vY29uZmlnJztcbmltcG9ydCBNYXRjaEZpbHRlcnMsIHsgRmlsdGVyT3B0aW9ucyB9IGZyb20gJy4vTWF0Y2hGaWx0ZXJzJztcbmltcG9ydCB0eXBlIHsgTWF0Y2hEdG8gfSBmcm9tICcuLi8uLi90eXBlcy9hcGknO1xuXG5jb25zdCByZW5kZXJXaXRoSTE4biA9IChjb21wb25lbnQ6IFJlYWN0LlJlYWN0RWxlbWVudCkgPT4ge1xuICByZXR1cm4gcmVuZGVyKFxuICAgIDxJMThuZXh0UHJvdmlkZXIgaTE4bj17aTE4bn0+XG4gICAgICB7Y29tcG9uZW50fVxuICAgIDwvSTE4bmV4dFByb3ZpZGVyPlxuICApO1xufTtcblxuY29uc3QgbW9ja01hdGNoZXM6IE1hdGNoRHRvW10gPSBbXG4gIHtcbiAgICBpZDogJ21hdGNoLTEnLFxuICAgIHRyaXBJZDogJ3RyaXAtMScsXG4gICAgZHJpdmVySWQ6ICdkcml2ZXItMScsXG4gICAgc2NvcmU6IDAuOSxcbiAgICBzdGF0dXM6ICdQRU5ESU5HJyxcbiAgICBvcmlnaW46ICc0MC40MTY4LC0zLjcwMzgnLFxuICAgIGRlc3RpbmF0aW9uU2VkZUlkOiAnU0VERS0xJyxcbiAgICBkYXRlVGltZTogJzIwMjQtMDEtMTVUMDg6MzA6MDBaJyxcbiAgICBzZWF0c0ZyZWU6IDQsXG4gICAgcmVhc29uczogWydTYW1lIHJvdXRlJ10sXG4gICAgZGlyZWN0aW9uOiAnVE9fU0VERScsXG4gICAgcGFpcmVkVHJpcElkOiBudWxsXG4gIH0sXG4gIHtcbiAgICBpZDogJ21hdGNoLTInLFxuICAgIHRyaXBJZDogJ3RyaXAtMicsXG4gICAgZHJpdmVySWQ6ICdkcml2ZXItMicsXG4gICAgc2NvcmU6IDAuNixcbiAgICBzdGF0dXM6ICdQRU5ESU5HJyxcbiAgICBvcmlnaW46ICc0MC40MjAwLC0zLjcwMDAnLFxuICAgIGRlc3RpbmF0aW9uU2VkZUlkOiAnU0VERS0xJyxcbiAgICBkYXRlVGltZTogJzIwMjQtMDEtMTVUMDk6MDA6MDBaJyxcbiAgICBzZWF0c0ZyZWU6IDIsXG4gICAgcmVhc29uczogWydTaW1pbGFyIHRpbWUnXSxcbiAgICBkaXJlY3Rpb246ICdUT19TRURFJyxcbiAgICBwYWlyZWRUcmlwSWQ6IG51bGxcbiAgfSxcbiAge1xuICAgIGlkOiAnbWF0Y2gtMycsXG4gICAgdHJpcElkOiAndHJpcC0zJyxcbiAgICBkcml2ZXJJZDogJ2RyaXZlci0zJyxcbiAgICBzY29yZTogMC4zLFxuICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgIG9yaWdpbjogJzQwLjQxMDAsLTMuNzEwMCcsXG4gICAgZGVzdGluYXRpb25TZWRlSWQ6ICdTRURFLTEnLFxuICAgIGRhdGVUaW1lOiAnMjAyNC0wMS0xNlQwODowMDowMFonLFxuICAgIHNlYXRzRnJlZTogMSxcbiAgICByZWFzb25zOiBbJ0RpZmZlcmVudCByb3V0ZSddLFxuICAgIGRpcmVjdGlvbjogJ1RPX1NFREUnLFxuICAgIHBhaXJlZFRyaXBJZDogbnVsbFxuICB9XG5dO1xuXG5kZXNjcmliZSgnTWF0Y2hGaWx0ZXJzJywgKCkgPT4ge1xuICBjb25zdCBtb2NrT25GaWx0ZXJlZE1hdGNoZXMgPSBqZXN0LmZuKCk7XG4gIGNvbnN0IG1vY2tPbkZpbHRlcnNDaGFuZ2UgPSBqZXN0LmZuKCk7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgLy8gQ2xlYXIgbG9jYWxTdG9yYWdlIGJlZm9yZSBlYWNoIHRlc3RcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgfSk7XG5cbiAgaXQoJ3JlbmRlcnMgZmlsdGVyIGNvbnRyb2xzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICByZW5kZXJXaXRoSTE4bihcbiAgICAgIDxNYXRjaEZpbHRlcnNcbiAgICAgICAgbWF0Y2hlcz17bW9ja01hdGNoZXN9XG4gICAgICAgIG9uRmlsdGVyZWRNYXRjaGVzPXttb2NrT25GaWx0ZXJlZE1hdGNoZXN9XG4gICAgICAgIG9uRmlsdGVyc0NoYW5nZT17bW9ja09uRmlsdGVyc0NoYW5nZX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdGaWx0ZXIgUmVzdWx0cycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdNaW5pbXVtIFNjb3JlJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ01pbmltdW0gU2VhdHMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRnJvbSBEYXRlJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1RvIERhdGUnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU29ydCBCeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdPcmRlcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnYXBwbGllcyBzY29yZSBmaWx0ZXIgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhJMThuKFxuICAgICAgPE1hdGNoRmlsdGVyc1xuICAgICAgICBtYXRjaGVzPXttb2NrTWF0Y2hlc31cbiAgICAgICAgb25GaWx0ZXJlZE1hdGNoZXM9e21vY2tPbkZpbHRlcmVkTWF0Y2hlc31cbiAgICAgICAgb25GaWx0ZXJzQ2hhbmdlPXttb2NrT25GaWx0ZXJzQ2hhbmdlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgY29uc3Qgc2NvcmVTbGlkZXIgPSBzY3JlZW4uZ2V0QnlSb2xlKCdzbGlkZXInKTtcbiAgICBmaXJlRXZlbnQuY2hhbmdlKHNjb3JlU2xpZGVyLCB7IHRhcmdldDogeyB2YWx1ZTogJzcwJyB9IH0pO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QobW9ja09uRmlsdGVyZWRNYXRjaGVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyBzY29yZTogMC45IH0pXG4gICAgICAgIF0pXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgnYXBwbGllcyBzZWF0cyBmaWx0ZXIgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhJMThuKFxuICAgICAgPE1hdGNoRmlsdGVyc1xuICAgICAgICBtYXRjaGVzPXttb2NrTWF0Y2hlc31cbiAgICAgICAgb25GaWx0ZXJlZE1hdGNoZXM9e21vY2tPbkZpbHRlcmVkTWF0Y2hlc31cbiAgICAgICAgb25GaWx0ZXJzQ2hhbmdlPXttb2NrT25GaWx0ZXJzQ2hhbmdlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgY29uc3Qgc2VhdHNTZWxlY3QgPSBzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoJzEgc2VhdCcpO1xuICAgIGZpcmVFdmVudC5jaGFuZ2Uoc2VhdHNTZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnMycgfSB9KTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KG1vY2tPbkZpbHRlcmVkTWF0Y2hlcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgc2VhdHNGcmVlOiA0IH0pXG4gICAgICAgIF0pXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgnYXBwbGllcyBkYXRlIGZpbHRlcnMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhJMThuKFxuICAgICAgPE1hdGNoRmlsdGVyc1xuICAgICAgICBtYXRjaGVzPXttb2NrTWF0Y2hlc31cbiAgICAgICAgb25GaWx0ZXJlZE1hdGNoZXM9e21vY2tPbkZpbHRlcmVkTWF0Y2hlc31cbiAgICAgICAgb25GaWx0ZXJzQ2hhbmdlPXttb2NrT25GaWx0ZXJzQ2hhbmdlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgY29uc3QgZGF0ZUZyb21JbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnRnJvbSBEYXRlJyk7XG4gICAgZmlyZUV2ZW50LmNoYW5nZShkYXRlRnJvbUlucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJzIwMjQtMDEtMTUnIH0gfSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChtb2NrT25GaWx0ZXJlZE1hdGNoZXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3QuYXJyYXlDb250YWluaW5nKFtcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IGRhdGVUaW1lOiAnMjAyNC0wMS0xNVQwODozMDowMFonIH0pLFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgZGF0ZVRpbWU6ICcyMDI0LTAxLTE1VDA5OjAwOjAwWicgfSlcbiAgICAgICAgXSlcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdzb3J0cyBieSBzY29yZSBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aEkxOG4oXG4gICAgICA8TWF0Y2hGaWx0ZXJzXG4gICAgICAgIG1hdGNoZXM9e21vY2tNYXRjaGVzfVxuICAgICAgICBvbkZpbHRlcmVkTWF0Y2hlcz17bW9ja09uRmlsdGVyZWRNYXRjaGVzfVxuICAgICAgICBvbkZpbHRlcnNDaGFuZ2U9e21vY2tPbkZpbHRlcnNDaGFuZ2V9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCBzb3J0QnlTZWxlY3QgPSBzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoJ1Njb3JlJyk7XG4gICAgZmlyZUV2ZW50LmNoYW5nZShzb3J0QnlTZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnc2NvcmUnIH0gfSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGNvbnN0IGZpbHRlcmVkTWF0Y2hlcyA9IG1vY2tPbkZpbHRlcmVkTWF0Y2hlcy5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KGZpbHRlcmVkTWF0Y2hlc1swXS5zY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbChmaWx0ZXJlZE1hdGNoZXNbMV0uc2NvcmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc29ydHMgYnkgZGF0ZSBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aEkxOG4oXG4gICAgICA8TWF0Y2hGaWx0ZXJzXG4gICAgICAgIG1hdGNoZXM9e21vY2tNYXRjaGVzfVxuICAgICAgICBvbkZpbHRlcmVkTWF0Y2hlcz17bW9ja09uRmlsdGVyZWRNYXRjaGVzfVxuICAgICAgICBvbkZpbHRlcnNDaGFuZ2U9e21vY2tPbkZpbHRlcnNDaGFuZ2V9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCBzb3J0QnlTZWxlY3QgPSBzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoJ1Njb3JlJyk7XG4gICAgZmlyZUV2ZW50LmNoYW5nZShzb3J0QnlTZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnZGF0ZScgfSB9KTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgY29uc3QgZmlsdGVyZWRNYXRjaGVzID0gbW9ja09uRmlsdGVyZWRNYXRjaGVzLm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBjb25zdCBkYXRlMSA9IG5ldyBEYXRlKGZpbHRlcmVkTWF0Y2hlc1swXS5kYXRlVGltZSk7XG4gICAgICBjb25zdCBkYXRlMiA9IG5ldyBEYXRlKGZpbHRlcmVkTWF0Y2hlc1sxXS5kYXRlVGltZSk7XG4gICAgICBleHBlY3QoZGF0ZTEuZ2V0VGltZSgpKS50b0JlTGVzc1RoYW5PckVxdWFsKGRhdGUyLmdldFRpbWUoKSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdzb3J0cyBieSBzZWF0cyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aEkxOG4oXG4gICAgICA8TWF0Y2hGaWx0ZXJzXG4gICAgICAgIG1hdGNoZXM9e21vY2tNYXRjaGVzfVxuICAgICAgICBvbkZpbHRlcmVkTWF0Y2hlcz17bW9ja09uRmlsdGVyZWRNYXRjaGVzfVxuICAgICAgICBvbkZpbHRlcnNDaGFuZ2U9e21vY2tPbkZpbHRlcnNDaGFuZ2V9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCBzb3J0QnlTZWxlY3QgPSBzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoJ1Njb3JlJyk7XG4gICAgZmlyZUV2ZW50LmNoYW5nZShzb3J0QnlTZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnc2VhdHMnIH0gfSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGNvbnN0IGZpbHRlcmVkTWF0Y2hlcyA9IG1vY2tPbkZpbHRlcmVkTWF0Y2hlcy5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KGZpbHRlcmVkTWF0Y2hlc1swXS5zZWF0c0ZyZWUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoZmlsdGVyZWRNYXRjaGVzWzFdLnNlYXRzRnJlZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdjaGFuZ2VzIHNvcnQgb3JkZXIgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhJMThuKFxuICAgICAgPE1hdGNoRmlsdGVyc1xuICAgICAgICBtYXRjaGVzPXttb2NrTWF0Y2hlc31cbiAgICAgICAgb25GaWx0ZXJlZE1hdGNoZXM9e21vY2tPbkZpbHRlcmVkTWF0Y2hlc31cbiAgICAgICAgb25GaWx0ZXJzQ2hhbmdlPXttb2NrT25GaWx0ZXJzQ2hhbmdlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgY29uc3Qgc29ydE9yZGVyU2VsZWN0ID0gc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCdEZXNjZW5kaW5nJyk7XG4gICAgZmlyZUV2ZW50LmNoYW5nZShzb3J0T3JkZXJTZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnYXNjJyB9IH0pO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QobW9ja09uRmlsdGVyc0NoYW5nZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgc29ydE9yZGVyOiAnYXNjJyB9KVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3dzIGFjdGl2ZSBmaWx0ZXIgY291bnQnLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aEkxOG4oXG4gICAgICA8TWF0Y2hGaWx0ZXJzXG4gICAgICAgIG1hdGNoZXM9e21vY2tNYXRjaGVzfVxuICAgICAgICBvbkZpbHRlcmVkTWF0Y2hlcz17bW9ja09uRmlsdGVyZWRNYXRjaGVzfVxuICAgICAgICBvbkZpbHRlcnNDaGFuZ2U9e21vY2tPbkZpbHRlcnNDaGFuZ2V9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCBzY29yZVNsaWRlciA9IHNjcmVlbi5nZXRCeVJvbGUoJ3NsaWRlcicpO1xuICAgIGZpcmVFdmVudC5jaGFuZ2Uoc2NvcmVTbGlkZXIsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnNTAnIH0gfSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FjdGl2ZS1jb3VudCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvd3MgZmlsdGVyIGNoaXBzIGZvciBhY3RpdmUgZmlsdGVycycsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXJXaXRoSTE4bihcbiAgICAgIDxNYXRjaEZpbHRlcnNcbiAgICAgICAgbWF0Y2hlcz17bW9ja01hdGNoZXN9XG4gICAgICAgIG9uRmlsdGVyZWRNYXRjaGVzPXttb2NrT25GaWx0ZXJlZE1hdGNoZXN9XG4gICAgICAgIG9uRmlsdGVyc0NoYW5nZT17bW9ja09uRmlsdGVyc0NoYW5nZX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIGNvbnN0IHNjb3JlU2xpZGVyID0gc2NyZWVuLmdldEJ5Um9sZSgnc2xpZGVyJyk7XG4gICAgZmlyZUV2ZW50LmNoYW5nZShzY29yZVNsaWRlciwgeyB0YXJnZXQ6IHsgdmFsdWU6ICc1MCcgfSB9KTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnc2NvcmUtY2hpcCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgncmVtb3ZlcyBmaWx0ZXIgY2hpcHMgd2hlbiBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhJMThuKFxuICAgICAgPE1hdGNoRmlsdGVyc1xuICAgICAgICBtYXRjaGVzPXttb2NrTWF0Y2hlc31cbiAgICAgICAgb25GaWx0ZXJlZE1hdGNoZXM9e21vY2tPbkZpbHRlcmVkTWF0Y2hlc31cbiAgICAgICAgb25GaWx0ZXJzQ2hhbmdlPXttb2NrT25GaWx0ZXJzQ2hhbmdlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgY29uc3Qgc2NvcmVTbGlkZXIgPSBzY3JlZW4uZ2V0QnlSb2xlKCdzbGlkZXInKTtcbiAgICBmaXJlRXZlbnQuY2hhbmdlKHNjb3JlU2xpZGVyLCB7IHRhcmdldDogeyB2YWx1ZTogJzUwJyB9IH0pO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBjb25zdCBjaGlwID0gc2NyZWVuLmdldEJ5VGVzdElkKCdzY29yZS1jaGlwJyk7XG4gICAgICBjb25zdCByZW1vdmVCdXR0b24gPSBjaGlwLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHJlbW92ZUJ1dHRvbiEpO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXN0SWQoJ3Njb3JlLWNoaXAnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdjbGVhcnMgYWxsIGZpbHRlcnMgd2hlbiBjbGVhciBidXR0b24gaXMgY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXJXaXRoSTE4bihcbiAgICAgIDxNYXRjaEZpbHRlcnNcbiAgICAgICAgbWF0Y2hlcz17bW9ja01hdGNoZXN9XG4gICAgICAgIG9uRmlsdGVyZWRNYXRjaGVzPXttb2NrT25GaWx0ZXJlZE1hdGNoZXN9XG4gICAgICAgIG9uRmlsdGVyc0NoYW5nZT17bW9ja09uRmlsdGVyc0NoYW5nZX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIGNvbnN0IHNjb3JlU2xpZGVyID0gc2NyZWVuLmdldEJ5Um9sZSgnc2xpZGVyJyk7XG4gICAgZmlyZUV2ZW50LmNoYW5nZShzY29yZVNsaWRlciwgeyB0YXJnZXQ6IHsgdmFsdWU6ICc1MCcgfSB9KTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgY29uc3QgY2xlYXJCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2NsZWFyLWZpbHRlcnMnKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhjbGVhckJ1dHRvbik7XG4gICAgfSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRlc3RJZCgnc2NvcmUtY2hpcCcpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3BlcnNpc3RzIGZpbHRlcnMgdG8gbG9jYWxTdG9yYWdlJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhJMThuKFxuICAgICAgPE1hdGNoRmlsdGVyc1xuICAgICAgICBtYXRjaGVzPXttb2NrTWF0Y2hlc31cbiAgICAgICAgb25GaWx0ZXJlZE1hdGNoZXM9e21vY2tPbkZpbHRlcmVkTWF0Y2hlc31cbiAgICAgICAgb25GaWx0ZXJzQ2hhbmdlPXttb2NrT25GaWx0ZXJzQ2hhbmdlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgY29uc3Qgc2NvcmVTbGlkZXIgPSBzY3JlZW4uZ2V0QnlSb2xlKCdzbGlkZXInKTtcbiAgICBmaXJlRXZlbnQuY2hhbmdlKHNjb3JlU2xpZGVyLCB7IHRhcmdldDogeyB2YWx1ZTogJzcwJyB9IH0pO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBjb25zdCBzYXZlZEZpbHRlcnMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbWF0Y2hGaWx0ZXJzJyk7XG4gICAgICBleHBlY3Qoc2F2ZWRGaWx0ZXJzKS50b0JlVHJ1dGh5KCk7XG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHNhdmVkRmlsdGVycyEpO1xuICAgICAgZXhwZWN0KHBhcnNlZC5taW5TY29yZSkudG9CZSg3MCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdsb2FkcyBmaWx0ZXJzIGZyb20gbG9jYWxTdG9yYWdlIG9uIG1vdW50JywgKCkgPT4ge1xuICAgIGNvbnN0IHNhdmVkRmlsdGVycyA9IHtcbiAgICAgIG1pblNjb3JlOiA2MCxcbiAgICAgIG1pblNlYXRzOiAyLFxuICAgICAgZGF0ZUZyb206ICcyMDI0LTAxLTE1JyxcbiAgICAgIGRhdGVUbzogJycsXG4gICAgICBzb3J0Qnk6ICdzY29yZScsXG4gICAgICBzb3J0T3JkZXI6ICdkZXNjJ1xuICAgIH07XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ21hdGNoRmlsdGVycycsIEpTT04uc3RyaW5naWZ5KHNhdmVkRmlsdGVycykpO1xuXG4gICAgcmVuZGVyV2l0aEkxOG4oXG4gICAgICA8TWF0Y2hGaWx0ZXJzXG4gICAgICAgIG1hdGNoZXM9e21vY2tNYXRjaGVzfVxuICAgICAgICBvbkZpbHRlcmVkTWF0Y2hlcz17bW9ja09uRmlsdGVyZWRNYXRjaGVzfVxuICAgICAgICBvbkZpbHRlcnNDaGFuZ2U9e21vY2tPbkZpbHRlcnNDaGFuZ2V9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCc2MCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnaGFuZGxlcyBpbnZhbGlkIGxvY2FsU3RvcmFnZSBkYXRhIGdyYWNlZnVsbHknLCAoKSA9PiB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ21hdGNoRmlsdGVycycsICdpbnZhbGlkIGpzb24nKTtcblxuICAgIHJlbmRlcldpdGhJMThuKFxuICAgICAgPE1hdGNoRmlsdGVyc1xuICAgICAgICBtYXRjaGVzPXttb2NrTWF0Y2hlc31cbiAgICAgICAgb25GaWx0ZXJlZE1hdGNoZXM9e21vY2tPbkZpbHRlcmVkTWF0Y2hlc31cbiAgICAgICAgb25GaWx0ZXJzQ2hhbmdlPXttb2NrT25GaWx0ZXJzQ2hhbmdlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgLy8gU2hvdWxkIG5vdCBjcmFzaCBhbmQgc2hvdWxkIHVzZSBkZWZhdWx0IHZhbHVlc1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoJzAnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==