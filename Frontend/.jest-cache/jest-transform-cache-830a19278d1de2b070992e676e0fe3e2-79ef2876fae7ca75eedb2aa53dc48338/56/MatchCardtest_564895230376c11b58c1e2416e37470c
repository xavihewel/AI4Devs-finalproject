e47a4d7601444ba1b572adaea6d85be4
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importDefault(require("react"));
const react_2 = require("@testing-library/react");
const react_i18next_1 = require("react-i18next");
const config_1 = __importDefault(require("../../i18n/config"));
const MatchCard_1 = __importDefault(require("./MatchCard"));
const renderWithI18n = (component) => {
    return (0, react_2.render)((0, jsx_runtime_1.jsx)(react_i18next_1.I18nextProvider, { i18n: config_1.default, children: component }));
};
const mockMatch = {
    id: 'match-1',
    tripId: 'trip-1',
    driverId: 'driver-1',
    score: 0.85,
    status: 'PENDING',
    origin: '40.4168,-3.7038',
    destinationSedeId: 'SEDE-1',
    dateTime: '2024-01-15T08:30:00Z',
    seatsFree: 3,
    reasons: ['Same route', 'Similar departure time'],
    direction: 'TO_SEDE',
    pairedTripId: null
};
describe('MatchCard', () => {
    const mockOnBook = jest.fn();
    const mockOnViewProfile = jest.fn();
    const mockOnRate = jest.fn();
    beforeEach(() => {
        jest.clearAllMocks();
    });
    it('renders match information correctly', () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchCard_1.default, { match: mockMatch, onBook: mockOnBook, onViewProfile: mockOnViewProfile, onRate: mockOnRate }));
        expect(react_2.screen.getByText(/Viaje a/)).toBeInTheDocument();
        expect(react_2.screen.getByText('40.4168,-3.7038')).toBeInTheDocument();
        expect(react_2.screen.getByText('3')).toBeInTheDocument();
        expect(react_2.screen.getByText('Same route')).toBeInTheDocument();
        expect(react_2.screen.getByText('Similar departure time')).toBeInTheDocument();
    });
    it('shows score badge with correct color and label', () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchCard_1.default, { match: mockMatch, onBook: mockOnBook, onViewProfile: mockOnViewProfile, onRate: mockOnRate }));
        const scoreBadge = react_2.screen.getByText('Excelente');
        expect(scoreBadge).toBeInTheDocument();
        expect(scoreBadge.closest('span')).toHaveClass('text-green-600', 'bg-green-100');
    });
    it('shows booked status when isBooked is true', () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchCard_1.default, { match: mockMatch, isBooked: true, onBook: mockOnBook, onViewProfile: mockOnViewProfile, onRate: mockOnRate }));
        expect(react_2.screen.getAllByText('Ya Reservado')).toHaveLength(2);
    });
    it('disables book button when no seats available', () => {
        const matchNoSeats = { ...mockMatch, seatsFree: 0 };
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchCard_1.default, { match: matchNoSeats, onBook: mockOnBook, onViewProfile: mockOnViewProfile, onRate: mockOnRate }));
        const bookButton = react_2.screen.getByText('Sin asientos disponibles');
        expect(bookButton).toBeDisabled();
    });
    it('disables book button when already booked', () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchCard_1.default, { match: mockMatch, isBooked: true, onBook: mockOnBook, onViewProfile: mockOnViewProfile, onRate: mockOnRate }));
        const bookButtons = react_2.screen.getAllByText('Ya Reservado');
        const mainButton = bookButtons.find(button => button.tagName === 'BUTTON');
        expect(mainButton).toBeDisabled();
    });
    it('shows loading state on book button when booking in progress', () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchCard_1.default, { match: mockMatch, isBookingInProgress: true, onBook: mockOnBook, onViewProfile: mockOnViewProfile, onRate: mockOnRate }));
        const bookButton = react_2.screen.getByRole('button', { name: /reservar viaje/i });
        expect(bookButton).toBeDisabled();
    });
    it('calls onBook when book button is clicked', () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchCard_1.default, { match: mockMatch, onBook: mockOnBook, onViewProfile: mockOnViewProfile, onRate: mockOnRate }));
        const bookButton = react_2.screen.getByText('Reservar Viaje');
        react_2.fireEvent.click(bookButton);
        expect(mockOnBook).toHaveBeenCalledWith(mockMatch);
    });
    it('calls onViewProfile when view profile button is clicked', () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchCard_1.default, { match: mockMatch, onBook: mockOnBook, onViewProfile: mockOnViewProfile, onRate: mockOnRate }));
        const viewProfileButton = react_2.screen.getByText('ðŸ‘¤ Ver Perfil');
        react_2.fireEvent.click(viewProfileButton);
        expect(mockOnViewProfile).toHaveBeenCalledWith('driver-1');
    });
    it('calls onRate when rate button is clicked', () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchCard_1.default, { match: mockMatch, onBook: mockOnBook, onViewProfile: mockOnViewProfile, onRate: mockOnRate }));
        const rateButton = react_2.screen.getByText('â­ Valorar');
        react_2.fireEvent.click(rateButton);
        expect(mockOnRate).toHaveBeenCalledWith('driver-1');
    });
    it('shows map toggle button when coordinates are valid', () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchCard_1.default, { match: mockMatch, onBook: mockOnBook, onViewProfile: mockOnViewProfile, onRate: mockOnRate }));
        expect(react_2.screen.getByText('Mostrar Mapa')).toBeInTheDocument();
    });
    it('toggles map visibility when show/hide map button is clicked', () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchCard_1.default, { match: mockMatch, onBook: mockOnBook, onViewProfile: mockOnViewProfile, onRate: mockOnRate }));
        const toggleButton = react_2.screen.getByText('Mostrar Mapa');
        react_2.fireEvent.click(toggleButton);
        expect(react_2.screen.getByText('Ocultar Mapa')).toBeInTheDocument();
    });
    it('does not show map section when coordinates are invalid', () => {
        const matchInvalidCoords = { ...mockMatch, origin: 'invalid' };
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchCard_1.default, { match: matchInvalidCoords, onBook: mockOnBook, onViewProfile: mockOnViewProfile, onRate: mockOnRate }));
        expect(react_2.screen.queryByText('Show Map')).not.toBeInTheDocument();
    });
    it('displays date and time correctly', () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchCard_1.default, { match: mockMatch, onBook: mockOnBook, onViewProfile: mockOnViewProfile, onRate: mockOnRate }));
        // Check that date and time are displayed (format may vary by locale)
        expect(react_2.screen.getByText(/2024/)).toBeInTheDocument();
    });
    it('shows compatibility reasons when available', () => {
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchCard_1.default, { match: mockMatch, onBook: mockOnBook, onViewProfile: mockOnViewProfile, onRate: mockOnRate }));
        expect(react_2.screen.getByText('Razones de compatibilidad:')).toBeInTheDocument();
        expect(react_2.screen.getByText('Same route')).toBeInTheDocument();
        expect(react_2.screen.getByText('Similar departure time')).toBeInTheDocument();
    });
    it('does not show compatibility reasons when empty', () => {
        const matchNoReasons = { ...mockMatch, reasons: [] };
        renderWithI18n((0, jsx_runtime_1.jsx)(MatchCard_1.default, { match: matchNoReasons, onBook: mockOnBook, onViewProfile: mockOnViewProfile, onRate: mockOnRate }));
        expect(react_2.screen.queryByText('Compatibility reasons:')).not.toBeInTheDocument();
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2FkbWluL0RvY3VtZW50cy9BSTREZXZzLWZpbmFscHJvamVjdC9Gcm9udGVuZC9zcmMvY29tcG9uZW50cy9tYXRjaGVzL01hdGNoQ2FyZC50ZXN0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxrREFBMEI7QUFDMUIsa0RBQW1FO0FBQ25FLGlEQUFnRDtBQUNoRCwrREFBcUM7QUFDckMsNERBQW9DO0FBR3BDLE1BQU0sY0FBYyxHQUFHLENBQUMsU0FBNkIsRUFBRSxFQUFFO0lBQ3ZELE9BQU8sSUFBQSxjQUFNLEVBQ1gsdUJBQUMsK0JBQWUsSUFBQyxJQUFJLEVBQUUsZ0JBQUksWUFDeEIsU0FBUyxHQUNNLENBQ25CLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRixNQUFNLFNBQVMsR0FBYTtJQUMxQixFQUFFLEVBQUUsU0FBUztJQUNiLE1BQU0sRUFBRSxRQUFRO0lBQ2hCLFFBQVEsRUFBRSxVQUFVO0lBQ3BCLEtBQUssRUFBRSxJQUFJO0lBQ1gsTUFBTSxFQUFFLFNBQVM7SUFDakIsTUFBTSxFQUFFLGlCQUFpQjtJQUN6QixpQkFBaUIsRUFBRSxRQUFRO0lBQzNCLFFBQVEsRUFBRSxzQkFBc0I7SUFDaEMsU0FBUyxFQUFFLENBQUM7SUFDWixPQUFPLEVBQUUsQ0FBQyxZQUFZLEVBQUUsd0JBQXdCLENBQUM7SUFDakQsU0FBUyxFQUFFLFNBQVM7SUFDcEIsWUFBWSxFQUFFLElBQUk7Q0FDbkIsQ0FBQztBQUVGLFFBQVEsQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFO0lBQ3pCLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztJQUM3QixNQUFNLGlCQUFpQixHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztJQUNwQyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7SUFFN0IsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUs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ZmluYWxwcm9qZWN0L0Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21hdGNoZXMvTWF0Y2hDYXJkLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBJMThuZXh0UHJvdmlkZXIgfSBmcm9tICdyZWFjdC1pMThuZXh0JztcbmltcG9ydCBpMThuIGZyb20gJy4uLy4uL2kxOG4vY29uZmlnJztcbmltcG9ydCBNYXRjaENhcmQgZnJvbSAnLi9NYXRjaENhcmQnO1xuaW1wb3J0IHR5cGUgeyBNYXRjaER0byB9IGZyb20gJy4uLy4uL3R5cGVzL2FwaSc7XG5cbmNvbnN0IHJlbmRlcldpdGhJMThuID0gKGNvbXBvbmVudDogUmVhY3QuUmVhY3RFbGVtZW50KSA9PiB7XG4gIHJldHVybiByZW5kZXIoXG4gICAgPEkxOG5leHRQcm92aWRlciBpMThuPXtpMThufT5cbiAgICAgIHtjb21wb25lbnR9XG4gICAgPC9JMThuZXh0UHJvdmlkZXI+XG4gICk7XG59O1xuXG5jb25zdCBtb2NrTWF0Y2g6IE1hdGNoRHRvID0ge1xuICBpZDogJ21hdGNoLTEnLFxuICB0cmlwSWQ6ICd0cmlwLTEnLFxuICBkcml2ZXJJZDogJ2RyaXZlci0xJyxcbiAgc2NvcmU6IDAuODUsXG4gIHN0YXR1czogJ1BFTkRJTkcnLFxuICBvcmlnaW46ICc0MC40MTY4LC0zLjcwMzgnLFxuICBkZXN0aW5hdGlvblNlZGVJZDogJ1NFREUtMScsXG4gIGRhdGVUaW1lOiAnMjAyNC0wMS0xNVQwODozMDowMFonLFxuICBzZWF0c0ZyZWU6IDMsXG4gIHJlYXNvbnM6IFsnU2FtZSByb3V0ZScsICdTaW1pbGFyIGRlcGFydHVyZSB0aW1lJ10sXG4gIGRpcmVjdGlvbjogJ1RPX1NFREUnLFxuICBwYWlyZWRUcmlwSWQ6IG51bGxcbn07XG5cbmRlc2NyaWJlKCdNYXRjaENhcmQnLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tPbkJvb2sgPSBqZXN0LmZuKCk7XG4gIGNvbnN0IG1vY2tPblZpZXdQcm9maWxlID0gamVzdC5mbigpO1xuICBjb25zdCBtb2NrT25SYXRlID0gamVzdC5mbigpO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBpdCgncmVuZGVycyBtYXRjaCBpbmZvcm1hdGlvbiBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aEkxOG4oXG4gICAgICA8TWF0Y2hDYXJkXG4gICAgICAgIG1hdGNoPXttb2NrTWF0Y2h9XG4gICAgICAgIG9uQm9vaz17bW9ja09uQm9va31cbiAgICAgICAgb25WaWV3UHJvZmlsZT17bW9ja09uVmlld1Byb2ZpbGV9XG4gICAgICAgIG9uUmF0ZT17bW9ja09uUmF0ZX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9WaWFqZSBhLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJzQwLjQxNjgsLTMuNzAzOCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCczJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NhbWUgcm91dGUnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2ltaWxhciBkZXBhcnR1cmUgdGltZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnc2hvd3Mgc2NvcmUgYmFkZ2Ugd2l0aCBjb3JyZWN0IGNvbG9yIGFuZCBsYWJlbCcsICgpID0+IHtcbiAgICByZW5kZXJXaXRoSTE4bihcbiAgICAgIDxNYXRjaENhcmRcbiAgICAgICAgbWF0Y2g9e21vY2tNYXRjaH1cbiAgICAgICAgb25Cb29rPXttb2NrT25Cb29rfVxuICAgICAgICBvblZpZXdQcm9maWxlPXttb2NrT25WaWV3UHJvZmlsZX1cbiAgICAgICAgb25SYXRlPXttb2NrT25SYXRlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgY29uc3Qgc2NvcmVCYWRnZSA9IHNjcmVlbi5nZXRCeVRleHQoJ0V4Y2VsZW50ZScpO1xuICAgIGV4cGVjdChzY29yZUJhZGdlKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY29yZUJhZGdlLmNsb3Nlc3QoJ3NwYW4nKSkudG9IYXZlQ2xhc3MoJ3RleHQtZ3JlZW4tNjAwJywgJ2JnLWdyZWVuLTEwMCcpO1xuICB9KTtcblxuICBpdCgnc2hvd3MgYm9va2VkIHN0YXR1cyB3aGVuIGlzQm9va2VkIGlzIHRydWUnLCAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aEkxOG4oXG4gICAgICA8TWF0Y2hDYXJkXG4gICAgICAgIG1hdGNoPXttb2NrTWF0Y2h9XG4gICAgICAgIGlzQm9va2VkPXt0cnVlfVxuICAgICAgICBvbkJvb2s9e21vY2tPbkJvb2t9XG4gICAgICAgIG9uVmlld1Byb2ZpbGU9e21vY2tPblZpZXdQcm9maWxlfVxuICAgICAgICBvblJhdGU9e21vY2tPblJhdGV9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEFsbEJ5VGV4dCgnWWEgUmVzZXJ2YWRvJykpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgfSk7XG5cbiAgaXQoJ2Rpc2FibGVzIGJvb2sgYnV0dG9uIHdoZW4gbm8gc2VhdHMgYXZhaWxhYmxlJywgKCkgPT4ge1xuICAgIGNvbnN0IG1hdGNoTm9TZWF0cyA9IHsgLi4ubW9ja01hdGNoLCBzZWF0c0ZyZWU6IDAgfTtcbiAgICBcbiAgICByZW5kZXJXaXRoSTE4bihcbiAgICAgIDxNYXRjaENhcmRcbiAgICAgICAgbWF0Y2g9e21hdGNoTm9TZWF0c31cbiAgICAgICAgb25Cb29rPXttb2NrT25Cb29rfVxuICAgICAgICBvblZpZXdQcm9maWxlPXttb2NrT25WaWV3UHJvZmlsZX1cbiAgICAgICAgb25SYXRlPXttb2NrT25SYXRlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgY29uc3QgYm9va0J1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ1NpbiBhc2llbnRvcyBkaXNwb25pYmxlcycpO1xuICAgIGV4cGVjdChib29rQnV0dG9uKS50b0JlRGlzYWJsZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ2Rpc2FibGVzIGJvb2sgYnV0dG9uIHdoZW4gYWxyZWFkeSBib29rZWQnLCAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aEkxOG4oXG4gICAgICA8TWF0Y2hDYXJkXG4gICAgICAgIG1hdGNoPXttb2NrTWF0Y2h9XG4gICAgICAgIGlzQm9va2VkPXt0cnVlfVxuICAgICAgICBvbkJvb2s9e21vY2tPbkJvb2t9XG4gICAgICAgIG9uVmlld1Byb2ZpbGU9e21vY2tPblZpZXdQcm9maWxlfVxuICAgICAgICBvblJhdGU9e21vY2tPblJhdGV9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCBib29rQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoJ1lhIFJlc2VydmFkbycpO1xuICAgIGNvbnN0IG1haW5CdXR0b24gPSBib29rQnV0dG9ucy5maW5kKGJ1dHRvbiA9PiBidXR0b24udGFnTmFtZSA9PT0gJ0JVVFRPTicpO1xuICAgIGV4cGVjdChtYWluQnV0dG9uKS50b0JlRGlzYWJsZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3dzIGxvYWRpbmcgc3RhdGUgb24gYm9vayBidXR0b24gd2hlbiBib29raW5nIGluIHByb2dyZXNzJywgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhJMThuKFxuICAgICAgPE1hdGNoQ2FyZFxuICAgICAgICBtYXRjaD17bW9ja01hdGNofVxuICAgICAgICBpc0Jvb2tpbmdJblByb2dyZXNzPXt0cnVlfVxuICAgICAgICBvbkJvb2s9e21vY2tPbkJvb2t9XG4gICAgICAgIG9uVmlld1Byb2ZpbGU9e21vY2tPblZpZXdQcm9maWxlfVxuICAgICAgICBvblJhdGU9e21vY2tPblJhdGV9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCBib29rQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvcmVzZXJ2YXIgdmlhamUvaSB9KTtcbiAgICBleHBlY3QoYm9va0J1dHRvbikudG9CZURpc2FibGVkKCk7XG4gIH0pO1xuXG4gIGl0KCdjYWxscyBvbkJvb2sgd2hlbiBib29rIGJ1dHRvbiBpcyBjbGlja2VkJywgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhJMThuKFxuICAgICAgPE1hdGNoQ2FyZFxuICAgICAgICBtYXRjaD17bW9ja01hdGNofVxuICAgICAgICBvbkJvb2s9e21vY2tPbkJvb2t9XG4gICAgICAgIG9uVmlld1Byb2ZpbGU9e21vY2tPblZpZXdQcm9maWxlfVxuICAgICAgICBvblJhdGU9e21vY2tPblJhdGV9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCBib29rQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnUmVzZXJ2YXIgVmlhamUnKTtcbiAgICBmaXJlRXZlbnQuY2xpY2soYm9va0J1dHRvbik7XG5cbiAgICBleHBlY3QobW9ja09uQm9vaykudG9IYXZlQmVlbkNhbGxlZFdpdGgobW9ja01hdGNoKTtcbiAgfSk7XG5cbiAgaXQoJ2NhbGxzIG9uVmlld1Byb2ZpbGUgd2hlbiB2aWV3IHByb2ZpbGUgYnV0dG9uIGlzIGNsaWNrZWQnLCAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aEkxOG4oXG4gICAgICA8TWF0Y2hDYXJkXG4gICAgICAgIG1hdGNoPXttb2NrTWF0Y2h9XG4gICAgICAgIG9uQm9vaz17bW9ja09uQm9va31cbiAgICAgICAgb25WaWV3UHJvZmlsZT17bW9ja09uVmlld1Byb2ZpbGV9XG4gICAgICAgIG9uUmF0ZT17bW9ja09uUmF0ZX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIGNvbnN0IHZpZXdQcm9maWxlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgn8J+RpCBWZXIgUGVyZmlsJyk7XG4gICAgZmlyZUV2ZW50LmNsaWNrKHZpZXdQcm9maWxlQnV0dG9uKTtcblxuICAgIGV4cGVjdChtb2NrT25WaWV3UHJvZmlsZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2RyaXZlci0xJyk7XG4gIH0pO1xuXG4gIGl0KCdjYWxscyBvblJhdGUgd2hlbiByYXRlIGJ1dHRvbiBpcyBjbGlja2VkJywgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhJMThuKFxuICAgICAgPE1hdGNoQ2FyZFxuICAgICAgICBtYXRjaD17bW9ja01hdGNofVxuICAgICAgICBvbkJvb2s9e21vY2tPbkJvb2t9XG4gICAgICAgIG9uVmlld1Byb2ZpbGU9e21vY2tPblZpZXdQcm9maWxlfVxuICAgICAgICBvblJhdGU9e21vY2tPblJhdGV9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCByYXRlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgn4q2QIFZhbG9yYXInKTtcbiAgICBmaXJlRXZlbnQuY2xpY2socmF0ZUJ1dHRvbik7XG5cbiAgICBleHBlY3QobW9ja09uUmF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2RyaXZlci0xJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG93cyBtYXAgdG9nZ2xlIGJ1dHRvbiB3aGVuIGNvb3JkaW5hdGVzIGFyZSB2YWxpZCcsICgpID0+IHtcbiAgICByZW5kZXJXaXRoSTE4bihcbiAgICAgIDxNYXRjaENhcmRcbiAgICAgICAgbWF0Y2g9e21vY2tNYXRjaH1cbiAgICAgICAgb25Cb29rPXttb2NrT25Cb29rfVxuICAgICAgICBvblZpZXdQcm9maWxlPXttb2NrT25WaWV3UHJvZmlsZX1cbiAgICAgICAgb25SYXRlPXttb2NrT25SYXRlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ01vc3RyYXIgTWFwYScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgndG9nZ2xlcyBtYXAgdmlzaWJpbGl0eSB3aGVuIHNob3cvaGlkZSBtYXAgYnV0dG9uIGlzIGNsaWNrZWQnLCAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aEkxOG4oXG4gICAgICA8TWF0Y2hDYXJkXG4gICAgICAgIG1hdGNoPXttb2NrTWF0Y2h9XG4gICAgICAgIG9uQm9vaz17bW9ja09uQm9va31cbiAgICAgICAgb25WaWV3UHJvZmlsZT17bW9ja09uVmlld1Byb2ZpbGV9XG4gICAgICAgIG9uUmF0ZT17bW9ja09uUmF0ZX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIGNvbnN0IHRvZ2dsZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ01vc3RyYXIgTWFwYScpO1xuICAgIGZpcmVFdmVudC5jbGljayh0b2dnbGVCdXR0b24pO1xuXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ09jdWx0YXIgTWFwYScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnZG9lcyBub3Qgc2hvdyBtYXAgc2VjdGlvbiB3aGVuIGNvb3JkaW5hdGVzIGFyZSBpbnZhbGlkJywgKCkgPT4ge1xuICAgIGNvbnN0IG1hdGNoSW52YWxpZENvb3JkcyA9IHsgLi4ubW9ja01hdGNoLCBvcmlnaW46ICdpbnZhbGlkJyB9O1xuICAgIFxuICAgIHJlbmRlcldpdGhJMThuKFxuICAgICAgPE1hdGNoQ2FyZFxuICAgICAgICBtYXRjaD17bWF0Y2hJbnZhbGlkQ29vcmRzfVxuICAgICAgICBvbkJvb2s9e21vY2tPbkJvb2t9XG4gICAgICAgIG9uVmlld1Byb2ZpbGU9e21vY2tPblZpZXdQcm9maWxlfVxuICAgICAgICBvblJhdGU9e21vY2tPblJhdGV9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdTaG93IE1hcCcpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ2Rpc3BsYXlzIGRhdGUgYW5kIHRpbWUgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhJMThuKFxuICAgICAgPE1hdGNoQ2FyZFxuICAgICAgICBtYXRjaD17bW9ja01hdGNofVxuICAgICAgICBvbkJvb2s9e21vY2tPbkJvb2t9XG4gICAgICAgIG9uVmlld1Byb2ZpbGU9e21vY2tPblZpZXdQcm9maWxlfVxuICAgICAgICBvblJhdGU9e21vY2tPblJhdGV9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICAvLyBDaGVjayB0aGF0IGRhdGUgYW5kIHRpbWUgYXJlIGRpc3BsYXllZCAoZm9ybWF0IG1heSB2YXJ5IGJ5IGxvY2FsZSlcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvMjAyNC8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnc2hvd3MgY29tcGF0aWJpbGl0eSByZWFzb25zIHdoZW4gYXZhaWxhYmxlJywgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhJMThuKFxuICAgICAgPE1hdGNoQ2FyZFxuICAgICAgICBtYXRjaD17bW9ja01hdGNofVxuICAgICAgICBvbkJvb2s9e21vY2tPbkJvb2t9XG4gICAgICAgIG9uVmlld1Byb2ZpbGU9e21vY2tPblZpZXdQcm9maWxlfVxuICAgICAgICBvblJhdGU9e21vY2tPblJhdGV9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUmF6b25lcyBkZSBjb21wYXRpYmlsaWRhZDonKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2FtZSByb3V0ZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTaW1pbGFyIGRlcGFydHVyZSB0aW1lJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdkb2VzIG5vdCBzaG93IGNvbXBhdGliaWxpdHkgcmVhc29ucyB3aGVuIGVtcHR5JywgKCkgPT4ge1xuICAgIGNvbnN0IG1hdGNoTm9SZWFzb25zID0geyAuLi5tb2NrTWF0Y2gsIHJlYXNvbnM6IFtdIH07XG4gICAgXG4gICAgcmVuZGVyV2l0aEkxOG4oXG4gICAgICA8TWF0Y2hDYXJkXG4gICAgICAgIG1hdGNoPXttYXRjaE5vUmVhc29uc31cbiAgICAgICAgb25Cb29rPXttb2NrT25Cb29rfVxuICAgICAgICBvblZpZXdQcm9maWxlPXttb2NrT25WaWV3UHJvZmlsZX1cbiAgICAgICAgb25SYXRlPXttb2NrT25SYXRlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnQ29tcGF0aWJpbGl0eSByZWFzb25zOicpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==