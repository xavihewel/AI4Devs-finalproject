{"file":"/Users/admin/Documents/AI4Devs-finalproject/Frontend/src/components/matches/MatchCard.tsx","mappings":"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","names":[],"sources":["/Users/admin/Documents/AI4Devs-finalproject/Frontend/src/components/matches/MatchCard.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport type { MatchDto } from '../../types/api';\nimport { Button, Card, CardContent } from '../ui';\nimport SimpleMapPreview from '../map/SimpleMapPreview';\nimport MapLinkButtons from '../map/MapLinkButtons';\nimport ScoreBadge from './ScoreBadge';\nimport { env } from '../../env';\n\ninterface MatchCardProps {\n  match: MatchDto;\n  isBooked?: boolean;\n  isBookingInProgress?: boolean;\n  onBook: (match: MatchDto) => void;\n  onViewProfile: (driverId: string) => void;\n  onRate: (driverId: string) => void;\n}\n\nexport default function MatchCard({\n  match,\n  isBooked = false,\n  isBookingInProgress = false,\n  onBook,\n  onViewProfile,\n  onRate\n}: MatchCardProps) {\n  const { t } = useTranslation('matches');\n  const [showMap, setShowMap] = useState(false);\n\n  const handleBooking = () => {\n    onBook(match);\n  };\n\n  const handleViewProfile = () => {\n    onViewProfile(match.driverId);\n  };\n\n  const handleRate = () => {\n    onRate(match.driverId);\n  };\n\n  const toggleMap = () => {\n    setShowMap(!showMap);\n  };\n\n  // Parse coordinates from origin string\n  const parseCoordinates = (origin: string) => {\n    const parts = (origin || '').split(',').map(s => parseFloat(s.trim()));\n    const hasCoords = parts.length === 2 && parts.every(n => !isNaN(n));\n    if (!hasCoords) return null;\n    return { lat: parts[0], lng: parts[1] };\n  };\n\n  const coordinates = parseCoordinates(match.origin);\n  const hasValidCoords = coordinates !== null;\n\n  return (\n    <Card>\n      <CardContent>\n        <div className=\"space-y-4\">\n          {/* Header with Score and Status */}\n          <div className=\"flex justify-between items-start\">\n            <div className=\"flex items-center flex-wrap gap-2\">\n              <ScoreBadge score={match.score} size=\"md\" />\n              {isBooked && (\n                <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200 flex items-center gap-1\">\n                  <svg className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                  </svg>\n                  {t('match.alreadyBooked')}\n                </span>\n              )}\n            </div>\n            <div className=\"text-right\">\n              <p className=\"text-sm text-gray-500\">\n                {new Date(match.dateTime).toLocaleDateString()}\n              </p>\n              <p className=\"text-sm text-gray-500\">\n                {new Date(match.dateTime).toLocaleTimeString()}\n              </p>\n            </div>\n          </div>\n\n          {/* Trip Details */}\n          <div className=\"space-y-2\">\n            <h3 className=\"font-semibold text-lg\">\n              {t('match.tripTo', { destination: match.destinationSedeId })}\n            </h3>\n            \n            <div className=\"space-y-1 text-sm text-gray-600\">\n              <p><strong>{t('match.origin')}:</strong> {match.origin}</p>\n              <p><strong>{t('match.freeSeats')}:</strong> {match.seatsFree}</p>\n            </div>\n\n            {/* Map Section */}\n            {hasValidCoords && (\n              <div className=\"pt-2\">\n                <div className=\"flex justify-between items-center mb-2\">\n                  <h4 className=\"text-sm font-medium text-gray-700\">\n                    {t('match.route')}\n                  </h4>\n                  <Button\n                    variant=\"secondary\"\n                    size=\"sm\"\n                    onClick={toggleMap}\n                  >\n                    {showMap ? t('match.hideMap') : t('match.showMap')}\n                  </Button>\n                </div>\n                \n                {showMap && (\n                  <div className=\"space-y-2\">\n                    <SimpleMapPreview\n                      origin={coordinates}\n                      height={160}\n                      interactive={false}\n                    />\n                    <MapLinkButtons\n                      lat={coordinates.lat}\n                      lng={coordinates.lng}\n                    />\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Compatibility Reasons */}\n            {match.reasons && match.reasons.length > 0 && (\n              <div className=\"space-y-1\">\n                <p className=\"text-sm font-medium text-gray-700\">\n                  {t('match.compatibilityReasons')}:\n                </p>\n                <ul className=\"text-xs text-gray-600 space-y-1\">\n                  {match.reasons.map((reason, index) => (\n                    <li key={`${match.id}-reason-${index}`} className=\"flex items-center\">\n                      <span className=\"w-1.5 h-1.5 bg-primary-500 rounded-full mr-2\"></span>\n                      {reason}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )}\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"pt-4 border-t border-gray-200\">\n            <Button\n              variant=\"primary\"\n              className=\"w-full\"\n              onClick={handleBooking}\n              disabled={isBookingInProgress || match.seatsFree === 0 || isBooked}\n              loading={isBookingInProgress}\n            >\n              {match.seatsFree === 0\n                ? t('match.noSeatsAvailable')\n                : isBooked\n                  ? t('match.alreadyBooked')\n                  : t('match.book')}\n            </Button>\n            \n            {/* Trust System Buttons */}\n            <div className=\"flex space-x-2 mt-2\">\n              <Button\n                variant=\"secondary\"\n                size=\"sm\"\n                className=\"flex-1\"\n                onClick={handleViewProfile}\n              >\n                👤 {t('match.viewProfile')}\n              </Button>\n              <Button\n                variant=\"secondary\"\n                size=\"sm\"\n                className=\"flex-1\"\n                onClick={handleRate}\n              >\n                ⭐ {t('match.rate')}\n              </Button>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n"],"version":3}