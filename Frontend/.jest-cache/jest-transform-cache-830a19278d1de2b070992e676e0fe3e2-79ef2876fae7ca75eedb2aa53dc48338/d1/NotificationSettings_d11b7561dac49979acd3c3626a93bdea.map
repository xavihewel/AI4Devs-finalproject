{"file":"/Users/admin/Documents/AI4Devs-finalproject/Frontend/src/components/notifications/NotificationSettings.tsx","mappings":"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","names":[],"sources":["/Users/admin/Documents/AI4Devs-finalproject/Frontend/src/components/notifications/NotificationSettings.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Button, Card, CardContent } from '../ui';\nimport { NotificationService } from '../../services/NotificationService';\nimport { env } from '../../env';\n\n/**\n * Component for managing push notification settings.\n * Follows Single Responsibility Principle: only handles notification settings UI.\n * Follows Dependency Inversion Principle: depends on NotificationService abstraction.\n */\nexport const NotificationSettings: React.FC = () => {\n  const { t } = useTranslation('notifications');\n  const [notificationService] = useState(() => new NotificationService(env.vapidPublicKey));\n  const [isSupported, setIsSupported] = useState(false);\n  const [isSubscribed, setIsSubscribed] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [endpoint, setEndpoint] = useState<string | null>(null);\n\n  useEffect(() => {\n    const initializeSettings = async () => {\n      const supported = notificationService.isSupported();\n      setIsSupported(supported);\n\n      if (supported) {\n        try {\n          const status = await notificationService.getSubscriptionStatus();\n          setIsSubscribed(status.isSubscribed);\n          setEndpoint(status.endpoint);\n        } catch (err) {\n          console.error('Error getting subscription status:', err);\n        }\n      }\n    };\n\n    initializeSettings();\n  }, [notificationService]);\n\n  const handleSubscribe = async () => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const success = await notificationService.subscribe();\n      if (success) {\n        const status = await notificationService.getSubscriptionStatus();\n        setIsSubscribed(status.isSubscribed);\n        setEndpoint(status.endpoint);\n      } else {\n        setError(t('notifications.error'));\n      }\n    } catch (err) {\n      console.error('Error subscribing to notifications:', err);\n      setError(t('notifications.error'));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleUnsubscribe = async () => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const success = await notificationService.unsubscribe();\n      if (success) {\n        setIsSubscribed(false);\n        setEndpoint(null);\n      } else {\n        setError(t('notifications.error'));\n      }\n    } catch (err) {\n      console.error('Error unsubscribing from notifications:', err);\n      setError(t('notifications.error'));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (!isSupported) {\n    return (\n      <Card>\n        <CardContent>\n          <div className=\"text-center py-8\">\n            <div className=\"text-gray-500 mb-4\">\n              <svg className=\"w-12 h-12 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 17h5l-5 5-5-5h5v-5a7.5 7.5 0 1 0-15 0v5h5l-5 5-5-5h5v-5a7.5 7.5 0 1 1 15 0v5z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n              {t('notifications.notSupported')}\n            </h3>\n            <p className=\"text-gray-600\">\n              {t('notifications.notSupportedDescription')}\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardContent>\n        <div className=\"space-y-6\">\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n              {t('notifications.title')}\n            </h3>\n            <p className=\"text-gray-600\">\n              {t('notifications.description')}\n            </p>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n              <div className=\"flex\">\n                <div className=\"flex-shrink-0\">\n                  <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n                  </svg>\n                </div>\n                <div className=\"ml-3\">\n                  <p className=\"text-sm text-red-800\">{error}</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {isSubscribed ? (\n            <div className=\"space-y-4\">\n              <div className=\"bg-green-50 border border-green-200 rounded-md p-4\">\n                <div className=\"flex\">\n                  <div className=\"flex-shrink-0\">\n                    <svg className=\"h-5 w-5 text-green-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </div>\n                  <div className=\"ml-3\">\n                    <p className=\"text-sm text-green-800\">\n                      {t('notifications.subscribed')}\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              {endpoint && (\n                <div className=\"text-sm text-gray-600\">\n                  <p className=\"font-medium\">{t('notifications.endpoint')}:</p>\n                  <p className=\"font-mono text-xs break-all\">{endpoint}</p>\n                </div>\n              )}\n\n              <Button\n                variant=\"secondary\"\n                onClick={handleUnsubscribe}\n                disabled={isLoading}\n                loading={isLoading}\n                className=\"w-full\"\n              >\n                {isLoading ? t('notifications.unsubscribing') : t('notifications.disable')}\n              </Button>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              <Button\n                variant=\"primary\"\n                onClick={handleSubscribe}\n                disabled={isLoading}\n                loading={isLoading}\n                className=\"w-full\"\n              >\n                {isLoading ? t('notifications.subscribing') : t('notifications.enable')}\n              </Button>\n\n              <div className=\"text-sm text-gray-600\">\n                <p>{t('notifications.privacyNote')}</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n"],"version":3}