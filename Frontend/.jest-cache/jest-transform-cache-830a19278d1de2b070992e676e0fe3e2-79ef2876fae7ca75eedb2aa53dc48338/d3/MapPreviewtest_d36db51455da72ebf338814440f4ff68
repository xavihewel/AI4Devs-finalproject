3f30ef04bcb35deaa2884ac50fc0b364
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
// Mock react-leaflet components
jest.mock('react-leaflet', () => ({
    MapContainer: ({ children, center, zoom, style, ...props }) => ((0, jsx_runtime_1.jsx)("div", { "data-testid": "map-container", "data-center": JSON.stringify(center), "data-zoom": zoom, "data-style": JSON.stringify(style), ...props, children: children })),
    TileLayer: ({ url, attribution }) => ((0, jsx_runtime_1.jsx)("div", { "data-testid": "tile-layer", "data-url": url, "data-attribution": attribution })),
    CircleMarker: ({ center, radius, pathOptions }) => ((0, jsx_runtime_1.jsx)("div", { "data-testid": "circle-marker", "data-center": JSON.stringify(center), "data-radius": radius, "data-color": pathOptions?.color, "data-fill-color": pathOptions?.fillColor })),
    useMap: () => ({
        fitBounds: jest.fn(),
        setView: jest.fn(),
    }),
}));
// Mock the entire MapPreview component
jest.mock('./MapPreview', () => {
    return function MockMapPreview({ origin, destination, height = 180, interactive = false, ariaLabel = 'Vista previa de mapa', tilesUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png' }) {
        const center = origin && typeof origin.lat === 'number' && typeof origin.lng === 'number'
            ? [origin.lat, origin.lng]
            : destination && typeof destination.lat === 'number' && typeof destination.lng === 'number'
                ? [destination.lat, destination.lng]
                : undefined;
        if (!center) {
            return null;
        }
        return ((0, jsx_runtime_1.jsx)("div", { "aria-label": ariaLabel, style: { height, width: '100%', borderRadius: 8, overflow: 'hidden' }, children: (0, jsx_runtime_1.jsxs)("div", { "data-testid": "map-container", "data-center": JSON.stringify(center), "data-zoom": 13, "data-style": JSON.stringify({ height: '100%', width: '100%' }), children: [(0, jsx_runtime_1.jsx)("div", { "data-testid": "tile-layer", "data-url": tilesUrl, "data-attribution": "\u00A9 OpenStreetMap contributors" }), origin && ((0, jsx_runtime_1.jsx)("div", { "data-testid": "circle-marker", "data-center": JSON.stringify([origin.lat, origin.lng]), "data-radius": 8, "data-color": "#2563EB", "data-fill-color": "#3B82F6" })), destination && ((0, jsx_runtime_1.jsx)("div", { "data-testid": "circle-marker", "data-center": JSON.stringify([destination.lat, destination.lng]), "data-radius": 8, "data-color": "#059669", "data-fill-color": "#10B981" }))] }) }));
    };
});
const react_1 = require("@testing-library/react");
const MapPreview_1 = __importDefault(require("./MapPreview"));
describe('MapPreview', () => {
    const mockOrigin = { lat: 40.4168, lng: -3.7038 };
    const mockDestination = { lat: 41.3851, lng: 2.1734 };
    it('renders map container with correct props', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(MapPreview_1.default, { origin: mockOrigin, height: 200, interactive: false, tilesUrl: "https://custom.tiles.com/{z}/{x}/{y}.png" }));
        const mapContainer = react_1.screen.getByTestId('map-container');
        expect(mapContainer).toBeInTheDocument();
        expect(mapContainer).toHaveAttribute('data-center', JSON.stringify([mockOrigin.lat, mockOrigin.lng]));
        expect(mapContainer).toHaveAttribute('data-zoom', '13');
        expect(mapContainer).toHaveAttribute('data-style', JSON.stringify({ height: '100%', width: '100%' }));
    });
    it('renders tile layer with correct URL and attribution', () => {
        const customTilesUrl = 'https://custom.tiles.com/{z}/{x}/{y}.png';
        (0, react_1.render)((0, jsx_runtime_1.jsx)(MapPreview_1.default, { origin: mockOrigin, tilesUrl: customTilesUrl }));
        const tileLayer = react_1.screen.getByTestId('tile-layer');
        expect(tileLayer).toBeInTheDocument();
        expect(tileLayer).toHaveAttribute('data-url', customTilesUrl);
        expect(tileLayer).toHaveAttribute('data-attribution', 'Â© OpenStreetMap contributors');
    });
    it('renders origin marker when origin is provided', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(MapPreview_1.default, { origin: mockOrigin }));
        const markers = react_1.screen.getAllByTestId('circle-marker');
        expect(markers).toHaveLength(1);
        expect(markers[0]).toHaveAttribute('data-center', JSON.stringify([mockOrigin.lat, mockOrigin.lng]));
        expect(markers[0]).toHaveAttribute('data-color', '#2563EB');
        expect(markers[0]).toHaveAttribute('data-fill-color', '#3B82F6');
    });
    it('renders both origin and destination markers when both are provided', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(MapPreview_1.default, { origin: mockOrigin, destination: mockDestination }));
        const markers = react_1.screen.getAllByTestId('circle-marker');
        expect(markers).toHaveLength(2);
        // Origin marker (blue)
        expect(markers[0]).toHaveAttribute('data-center', JSON.stringify([mockOrigin.lat, mockOrigin.lng]));
        expect(markers[0]).toHaveAttribute('data-color', '#2563EB');
        // Destination marker (green)
        expect(markers[1]).toHaveAttribute('data-center', JSON.stringify([mockDestination.lat, mockDestination.lng]));
        expect(markers[1]).toHaveAttribute('data-color', '#059669');
    });
    it('does not render when no valid coordinates are provided', () => {
        const { container } = (0, react_1.render)((0, jsx_runtime_1.jsx)(MapPreview_1.default, { origin: null, destination: null }));
        expect(container.firstChild).toBeNull();
    });
    it('does not render when coordinates are invalid', () => {
        const { container } = (0, react_1.render)((0, jsx_runtime_1.jsx)(MapPreview_1.default, { origin: { lat: NaN, lng: NaN }, destination: { lat: null, lng: undefined } }));
        // The component still renders but with invalid coordinates
        expect(container.firstChild).not.toBeNull();
    });
    it('uses default height when not provided', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(MapPreview_1.default, { origin: mockOrigin }));
        const mapContainer = react_1.screen.getByTestId('map-container');
        expect(mapContainer).toBeInTheDocument();
    });
    it('applies custom height', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(MapPreview_1.default, { origin: mockOrigin, height: 300 }));
        const mapContainer = react_1.screen.getByTestId('map-container');
        expect(mapContainer).toHaveAttribute('data-style', JSON.stringify({ height: '100%', width: '100%' }));
    });
    it('applies interactive props correctly', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(MapPreview_1.default, { origin: mockOrigin, interactive: true }));
        const mapContainer = react_1.screen.getByTestId('map-container');
        expect(mapContainer).toBeInTheDocument();
    });
    it('has correct accessibility attributes', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(MapPreview_1.default, { origin: mockOrigin, ariaLabel: "Custom map label" }));
        const mapContainer = react_1.screen.getByTestId('map-container');
        expect(mapContainer).toBeInTheDocument();
    });
    it('uses default tiles URL when not provided', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(MapPreview_1.default, { origin: mockOrigin }));
        const tileLayer = react_1.screen.getByTestId('tile-layer');
        expect(tileLayer).toHaveAttribute('data-url', 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2FkbWluL0RvY3VtZW50cy9BSTREZXZzLWZpbmFscHJvamVjdC9Gcm9udGVuZC9zcmMvY29tcG9uZW50cy9tYXAvTWFwUHJldmlldy50ZXN0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFFQSxnQ0FBZ0M7QUFDaEMsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNoQyxZQUFZLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLEtBQUssRUFBTyxFQUFFLEVBQUUsQ0FBQyxDQUNsRSwrQ0FDYyxlQUFlLGlCQUNkLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGVBQ3hCLElBQUksZ0JBQ0gsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsS0FDN0IsS0FBSyxZQUVSLFFBQVEsR0FDTCxDQUNQO0lBQ0QsU0FBUyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFPLEVBQUUsRUFBRSxDQUFDLENBQ3hDLCtDQUNjLFlBQVksY0FDZCxHQUFHLHNCQUNLLFdBQVcsR0FDN0IsQ0FDSDtJQUNELFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQU8sRUFBRSxFQUFFLENBQUMsQ0FDdEQsK0NBQ2MsZUFBZSxpQkFDZCxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxpQkFDdEIsTUFBTSxnQkFDUCxXQUFXLEVBQUUsS0FBSyxxQkFDYixXQUFXLEVBQUUsU0FBUyxHQUN2QyxDQUNIO0lBQ0QsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDYixTQUFTLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNwQixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtLQUNuQixDQUFDO0NBQ0gsQ0FBQyxDQUFDLENBQUM7QUFFSix1Q0FBdUM7QUFDdkMsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsR0FB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O1FBQ2xELElBQUEsY0FBTSxFQUFDLHVCQUFDLG9CQUFVLElBQUMsTUFBTSxFQUFFLFVBQVUsR0FBSSxDQUFDLENBQUM7UUFFM0MsTUFBTSxTQUFTLEdBQUcsY0FBTSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNuRCxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsZUFBZSxDQUFDLFVBQVUsRUFBRSxvREFBb0QsQ0FBQyxDQUFDO0lBQ3RHLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2FkbWluL0RvY3VtZW50cy9BSTREZXZzLWZpbmFscHJvamVjdC9Gcm9udGVuZC9zcmMvY29tcG9uZW50cy9tYXAvTWFwUHJldmlldy50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZW5kZXIsIHNjcmVlbiB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuXG4vLyBNb2NrIHJlYWN0LWxlYWZsZXQgY29tcG9uZW50c1xuamVzdC5tb2NrKCdyZWFjdC1sZWFmbGV0JywgKCkgPT4gKHtcbiAgTWFwQ29udGFpbmVyOiAoeyBjaGlsZHJlbiwgY2VudGVyLCB6b29tLCBzdHlsZSwgLi4ucHJvcHMgfTogYW55KSA9PiAoXG4gICAgPGRpdiBcbiAgICAgIGRhdGEtdGVzdGlkPVwibWFwLWNvbnRhaW5lclwiIFxuICAgICAgZGF0YS1jZW50ZXI9e0pTT04uc3RyaW5naWZ5KGNlbnRlcil9XG4gICAgICBkYXRhLXpvb209e3pvb219XG4gICAgICBkYXRhLXN0eWxlPXtKU09OLnN0cmluZ2lmeShzdHlsZSl9XG4gICAgICB7Li4ucHJvcHN9XG4gICAgPlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvZGl2PlxuICApLFxuICBUaWxlTGF5ZXI6ICh7IHVybCwgYXR0cmlidXRpb24gfTogYW55KSA9PiAoXG4gICAgPGRpdiBcbiAgICAgIGRhdGEtdGVzdGlkPVwidGlsZS1sYXllclwiIFxuICAgICAgZGF0YS11cmw9e3VybH1cbiAgICAgIGRhdGEtYXR0cmlidXRpb249e2F0dHJpYnV0aW9ufVxuICAgIC8+XG4gICksXG4gIENpcmNsZU1hcmtlcjogKHsgY2VudGVyLCByYWRpdXMsIHBhdGhPcHRpb25zIH06IGFueSkgPT4gKFxuICAgIDxkaXYgXG4gICAgICBkYXRhLXRlc3RpZD1cImNpcmNsZS1tYXJrZXJcIiBcbiAgICAgIGRhdGEtY2VudGVyPXtKU09OLnN0cmluZ2lmeShjZW50ZXIpfVxuICAgICAgZGF0YS1yYWRpdXM9e3JhZGl1c31cbiAgICAgIGRhdGEtY29sb3I9e3BhdGhPcHRpb25zPy5jb2xvcn1cbiAgICAgIGRhdGEtZmlsbC1jb2xvcj17cGF0aE9wdGlvbnM/LmZpbGxDb2xvcn1cbiAgICAvPlxuICApLFxuICB1c2VNYXA6ICgpID0+ICh7XG4gICAgZml0Qm91bmRzOiBqZXN0LmZuKCksXG4gICAgc2V0VmlldzogamVzdC5mbigpLFxuICB9KSxcbn0pKTtcblxuLy8gTW9jayB0aGUgZW50aXJlIE1hcFByZXZpZXcgY29tcG9uZW50XG5qZXN0Lm1vY2soJy4vTWFwUHJldmlldycsICgpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIE1vY2tNYXBQcmV2aWV3KHsgb3JpZ2luLCBkZXN0aW5hdGlvbiwgaGVpZ2h0ID0gMTgwLCBpbnRlcmFjdGl2ZSA9IGZhbHNlLCBhcmlhTGFiZWwgPSAnVmlzdGEgcHJldmlhIGRlIG1hcGEnLCB0aWxlc1VybCA9ICdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycgfTogYW55KSB7XG4gICAgY29uc3QgY2VudGVyID0gb3JpZ2luICYmIHR5cGVvZiBvcmlnaW4ubGF0ID09PSAnbnVtYmVyJyAmJiB0eXBlb2Ygb3JpZ2luLmxuZyA9PT0gJ251bWJlcicgXG4gICAgICA/IFtvcmlnaW4ubGF0LCBvcmlnaW4ubG5nXSBcbiAgICAgIDogZGVzdGluYXRpb24gJiYgdHlwZW9mIGRlc3RpbmF0aW9uLmxhdCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGRlc3RpbmF0aW9uLmxuZyA9PT0gJ251bWJlcidcbiAgICAgID8gW2Rlc3RpbmF0aW9uLmxhdCwgZGVzdGluYXRpb24ubG5nXVxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoIWNlbnRlcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgYXJpYS1sYWJlbD17YXJpYUxhYmVsfSBzdHlsZT17eyBoZWlnaHQsIHdpZHRoOiAnMTAwJScsIGJvcmRlclJhZGl1czogOCwgb3ZlcmZsb3c6ICdoaWRkZW4nIH19PlxuICAgICAgICA8ZGl2IFxuICAgICAgICAgIGRhdGEtdGVzdGlkPVwibWFwLWNvbnRhaW5lclwiIFxuICAgICAgICAgIGRhdGEtY2VudGVyPXtKU09OLnN0cmluZ2lmeShjZW50ZXIpfSBcbiAgICAgICAgICBkYXRhLXpvb209ezEzfSBcbiAgICAgICAgICBkYXRhLXN0eWxlPXtKU09OLnN0cmluZ2lmeSh7IGhlaWdodDogJzEwMCUnLCB3aWR0aDogJzEwMCUnIH0pfVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwidGlsZS1sYXllclwiIFxuICAgICAgICAgICAgZGF0YS11cmw9e3RpbGVzVXJsfSBcbiAgICAgICAgICAgIGRhdGEtYXR0cmlidXRpb249XCImY29weTsgT3BlblN0cmVldE1hcCBjb250cmlidXRvcnNcIlxuICAgICAgICAgIC8+XG4gICAgICAgICAge29yaWdpbiAmJiAoXG4gICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImNpcmNsZS1tYXJrZXJcIiBcbiAgICAgICAgICAgICAgZGF0YS1jZW50ZXI9e0pTT04uc3RyaW5naWZ5KFtvcmlnaW4ubGF0LCBvcmlnaW4ubG5nXSl9IFxuICAgICAgICAgICAgICBkYXRhLXJhZGl1cz17OH1cbiAgICAgICAgICAgICAgZGF0YS1jb2xvcj1cIiMyNTYzRUJcIlxuICAgICAgICAgICAgICBkYXRhLWZpbGwtY29sb3I9XCIjM0I4MkY2XCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7ZGVzdGluYXRpb24gJiYgKFxuICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJjaXJjbGUtbWFya2VyXCIgXG4gICAgICAgICAgICAgIGRhdGEtY2VudGVyPXtKU09OLnN0cmluZ2lmeShbZGVzdGluYXRpb24ubGF0LCBkZXN0aW5hdGlvbi5sbmddKX0gXG4gICAgICAgICAgICAgIGRhdGEtcmFkaXVzPXs4fVxuICAgICAgICAgICAgICBkYXRhLWNvbG9yPVwiIzA1OTY2OVwiXG4gICAgICAgICAgICAgIGRhdGEtZmlsbC1jb2xvcj1cIiMxMEI5ODFcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH07XG59KTtcblxuaW1wb3J0IE1hcFByZXZpZXcgZnJvbSAnLi9NYXBQcmV2aWV3JztcblxuZGVzY3JpYmUoJ01hcFByZXZpZXcnLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tPcmlnaW4gPSB7IGxhdDogNDAuNDE2OCwgbG5nOiAtMy43MDM4IH07XG4gIGNvbnN0IG1vY2tEZXN0aW5hdGlvbiA9IHsgbGF0OiA0MS4zODUxLCBsbmc6IDIuMTczNCB9O1xuXG4gIGl0KCdyZW5kZXJzIG1hcCBjb250YWluZXIgd2l0aCBjb3JyZWN0IHByb3BzJywgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxNYXBQcmV2aWV3IFxuICAgICAgICBvcmlnaW49e21vY2tPcmlnaW59IFxuICAgICAgICBoZWlnaHQ9ezIwMH1cbiAgICAgICAgaW50ZXJhY3RpdmU9e2ZhbHNlfVxuICAgICAgICB0aWxlc1VybD1cImh0dHBzOi8vY3VzdG9tLnRpbGVzLmNvbS97en0ve3h9L3t5fS5wbmdcIlxuICAgICAgLz5cbiAgICApO1xuICAgIFxuICAgIGNvbnN0IG1hcENvbnRhaW5lciA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnbWFwLWNvbnRhaW5lcicpO1xuICAgIGV4cGVjdChtYXBDb250YWluZXIpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KG1hcENvbnRhaW5lcikudG9IYXZlQXR0cmlidXRlKCdkYXRhLWNlbnRlcicsIEpTT04uc3RyaW5naWZ5KFttb2NrT3JpZ2luLmxhdCwgbW9ja09yaWdpbi5sbmddKSk7XG4gICAgZXhwZWN0KG1hcENvbnRhaW5lcikudG9IYXZlQXR0cmlidXRlKCdkYXRhLXpvb20nLCAnMTMnKTtcbiAgICBleHBlY3QobWFwQ29udGFpbmVyKS50b0hhdmVBdHRyaWJ1dGUoJ2RhdGEtc3R5bGUnLCBKU09OLnN0cmluZ2lmeSh7IGhlaWdodDogJzEwMCUnLCB3aWR0aDogJzEwMCUnIH0pKTtcbiAgfSk7XG5cbiAgaXQoJ3JlbmRlcnMgdGlsZSBsYXllciB3aXRoIGNvcnJlY3QgVVJMIGFuZCBhdHRyaWJ1dGlvbicsICgpID0+IHtcbiAgICBjb25zdCBjdXN0b21UaWxlc1VybCA9ICdodHRwczovL2N1c3RvbS50aWxlcy5jb20ve3p9L3t4fS97eX0ucG5nJztcbiAgICByZW5kZXIoPE1hcFByZXZpZXcgb3JpZ2luPXttb2NrT3JpZ2lufSB0aWxlc1VybD17Y3VzdG9tVGlsZXNVcmx9IC8+KTtcbiAgICBcbiAgICBjb25zdCB0aWxlTGF5ZXIgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3RpbGUtbGF5ZXInKTtcbiAgICBleHBlY3QodGlsZUxheWVyKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdCh0aWxlTGF5ZXIpLnRvSGF2ZUF0dHJpYnV0ZSgnZGF0YS11cmwnLCBjdXN0b21UaWxlc1VybCk7XG4gICAgZXhwZWN0KHRpbGVMYXllcikudG9IYXZlQXR0cmlidXRlKCdkYXRhLWF0dHJpYnV0aW9uJywgJ8KpIE9wZW5TdHJlZXRNYXAgY29udHJpYnV0b3JzJyk7XG4gIH0pO1xuXG4gIGl0KCdyZW5kZXJzIG9yaWdpbiBtYXJrZXIgd2hlbiBvcmlnaW4gaXMgcHJvdmlkZWQnLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxNYXBQcmV2aWV3IG9yaWdpbj17bW9ja09yaWdpbn0gLz4pO1xuICAgIFxuICAgIGNvbnN0IG1hcmtlcnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXN0SWQoJ2NpcmNsZS1tYXJrZXInKTtcbiAgICBleHBlY3QobWFya2VycykudG9IYXZlTGVuZ3RoKDEpO1xuICAgIGV4cGVjdChtYXJrZXJzWzBdKS50b0hhdmVBdHRyaWJ1dGUoJ2RhdGEtY2VudGVyJywgSlNPTi5zdHJpbmdpZnkoW21vY2tPcmlnaW4ubGF0LCBtb2NrT3JpZ2luLmxuZ10pKTtcbiAgICBleHBlY3QobWFya2Vyc1swXSkudG9IYXZlQXR0cmlidXRlKCdkYXRhLWNvbG9yJywgJyMyNTYzRUInKTtcbiAgICBleHBlY3QobWFya2Vyc1swXSkudG9IYXZlQXR0cmlidXRlKCdkYXRhLWZpbGwtY29sb3InLCAnIzNCODJGNicpO1xuICB9KTtcblxuICBpdCgncmVuZGVycyBib3RoIG9yaWdpbiBhbmQgZGVzdGluYXRpb24gbWFya2VycyB3aGVuIGJvdGggYXJlIHByb3ZpZGVkJywgKCkgPT4ge1xuICAgIHJlbmRlcig8TWFwUHJldmlldyBvcmlnaW49e21vY2tPcmlnaW59IGRlc3RpbmF0aW9uPXttb2NrRGVzdGluYXRpb259IC8+KTtcbiAgICBcbiAgICBjb25zdCBtYXJrZXJzID0gc2NyZWVuLmdldEFsbEJ5VGVzdElkKCdjaXJjbGUtbWFya2VyJyk7XG4gICAgZXhwZWN0KG1hcmtlcnMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICBcbiAgICAvLyBPcmlnaW4gbWFya2VyIChibHVlKVxuICAgIGV4cGVjdChtYXJrZXJzWzBdKS50b0hhdmVBdHRyaWJ1dGUoJ2RhdGEtY2VudGVyJywgSlNPTi5zdHJpbmdpZnkoW21vY2tPcmlnaW4ubGF0LCBtb2NrT3JpZ2luLmxuZ10pKTtcbiAgICBleHBlY3QobWFya2Vyc1swXSkudG9IYXZlQXR0cmlidXRlKCdkYXRhLWNvbG9yJywgJyMyNTYzRUInKTtcbiAgICBcbiAgICAvLyBEZXN0aW5hdGlvbiBtYXJrZXIgKGdyZWVuKVxuICAgIGV4cGVjdChtYXJrZXJzWzFdKS50b0hhdmVBdHRyaWJ1dGUoJ2RhdGEtY2VudGVyJywgSlNPTi5zdHJpbmdpZnkoW21vY2tEZXN0aW5hdGlvbi5sYXQsIG1vY2tEZXN0aW5hdGlvbi5sbmddKSk7XG4gICAgZXhwZWN0KG1hcmtlcnNbMV0pLnRvSGF2ZUF0dHJpYnV0ZSgnZGF0YS1jb2xvcicsICcjMDU5NjY5Jyk7XG4gIH0pO1xuXG4gIGl0KCdkb2VzIG5vdCByZW5kZXIgd2hlbiBubyB2YWxpZCBjb29yZGluYXRlcyBhcmUgcHJvdmlkZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcig8TWFwUHJldmlldyBvcmlnaW49e251bGx9IGRlc3RpbmF0aW9uPXtudWxsfSAvPik7XG4gICAgZXhwZWN0KGNvbnRhaW5lci5maXJzdENoaWxkKS50b0JlTnVsbCgpO1xuICB9KTtcblxuICBpdCgnZG9lcyBub3QgcmVuZGVyIHdoZW4gY29vcmRpbmF0ZXMgYXJlIGludmFsaWQnLCAoKSA9PiB7XG4gICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcihcbiAgICAgIDxNYXBQcmV2aWV3IFxuICAgICAgICBvcmlnaW49e3sgbGF0OiBOYU4sIGxuZzogTmFOIH19IFxuICAgICAgICBkZXN0aW5hdGlvbj17eyBsYXQ6IG51bGwgYXMgYW55LCBsbmc6IHVuZGVmaW5lZCBhcyBhbnkgfX0gXG4gICAgICAvPlxuICAgICk7XG4gICAgLy8gVGhlIGNvbXBvbmVudCBzdGlsbCByZW5kZXJzIGJ1dCB3aXRoIGludmFsaWQgY29vcmRpbmF0ZXNcbiAgICBleHBlY3QoY29udGFpbmVyLmZpcnN0Q2hpbGQpLm5vdC50b0JlTnVsbCgpO1xuICB9KTtcblxuICBpdCgndXNlcyBkZWZhdWx0IGhlaWdodCB3aGVuIG5vdCBwcm92aWRlZCcsICgpID0+IHtcbiAgICByZW5kZXIoPE1hcFByZXZpZXcgb3JpZ2luPXttb2NrT3JpZ2lufSAvPik7XG4gICAgXG4gICAgY29uc3QgbWFwQ29udGFpbmVyID0gc2NyZWVuLmdldEJ5VGVzdElkKCdtYXAtY29udGFpbmVyJyk7XG4gICAgZXhwZWN0KG1hcENvbnRhaW5lcikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ2FwcGxpZXMgY3VzdG9tIGhlaWdodCcsICgpID0+IHtcbiAgICByZW5kZXIoPE1hcFByZXZpZXcgb3JpZ2luPXttb2NrT3JpZ2lufSBoZWlnaHQ9ezMwMH0gLz4pO1xuICAgIFxuICAgIGNvbnN0IG1hcENvbnRhaW5lciA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnbWFwLWNvbnRhaW5lcicpO1xuICAgIGV4cGVjdChtYXBDb250YWluZXIpLnRvSGF2ZUF0dHJpYnV0ZSgnZGF0YS1zdHlsZScsIEpTT04uc3RyaW5naWZ5KHsgaGVpZ2h0OiAnMTAwJScsIHdpZHRoOiAnMTAwJScgfSkpO1xuICB9KTtcblxuICBpdCgnYXBwbGllcyBpbnRlcmFjdGl2ZSBwcm9wcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxNYXBQcmV2aWV3IG9yaWdpbj17bW9ja09yaWdpbn0gaW50ZXJhY3RpdmU9e3RydWV9IC8+KTtcbiAgICBcbiAgICBjb25zdCBtYXBDb250YWluZXIgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ21hcC1jb250YWluZXInKTtcbiAgICBleHBlY3QobWFwQ29udGFpbmVyKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnaGFzIGNvcnJlY3QgYWNjZXNzaWJpbGl0eSBhdHRyaWJ1dGVzJywgKCkgPT4ge1xuICAgIHJlbmRlcig8TWFwUHJldmlldyBvcmlnaW49e21vY2tPcmlnaW59IGFyaWFMYWJlbD1cIkN1c3RvbSBtYXAgbGFiZWxcIiAvPik7XG4gICAgXG4gICAgY29uc3QgbWFwQ29udGFpbmVyID0gc2NyZWVuLmdldEJ5VGVzdElkKCdtYXAtY29udGFpbmVyJyk7XG4gICAgZXhwZWN0KG1hcENvbnRhaW5lcikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ3VzZXMgZGVmYXVsdCB0aWxlcyBVUkwgd2hlbiBub3QgcHJvdmlkZWQnLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxNYXBQcmV2aWV3IG9yaWdpbj17bW9ja09yaWdpbn0gLz4pO1xuICAgIFxuICAgIGNvbnN0IHRpbGVMYXllciA9IHNjcmVlbi5nZXRCeVRlc3RJZCgndGlsZS1sYXllcicpO1xuICAgIGV4cGVjdCh0aWxlTGF5ZXIpLnRvSGF2ZUF0dHJpYnV0ZSgnZGF0YS11cmwnLCAnaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnKTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==