{"file":"/Users/admin/Documents/AI4Devs-finalproject/Frontend/src/components/map/MapPreview.test.tsx","mappings":";;;;;;AAEA,gCAAgC;AAChC,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,GAAG,EAAE,CAAC,CAAC;IAChC,YAAY,EAAE,CAAC,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,KAAK,EAAO,EAAE,EAAE,CAAC,CAClE,+CACc,eAAe,iBACd,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,eACxB,IAAI,gBACH,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAC7B,KAAK,YAER,QAAQ,GACL,CACP;IACD,SAAS,EAAE,CAAC,EAAE,GAAG,EAAE,WAAW,EAAO,EAAE,EAAE,CAAC,CACxC,+CACc,YAAY,cACd,GAAG,sBACK,WAAW,GAC7B,CACH;IACD,YAAY,EAAE,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,WAAW,EAAO,EAAE,EAAE,CAAC,CACtD,+CACc,eAAe,iBACd,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,iBACtB,MAAM,gBACP,WAAW,EAAE,KAAK,qBACb,WAAW,EAAE,SAAS,GACvC,CACH;IACD,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;QACb,SAAS,EAAE,IAAI,CAAC,EAAE,EAAE;QACpB,OAAO,EAAE,IAAI,CAAC,EAAE,EAAE;KACnB,CAAC;CACH,CAAC,CAAC,CAAC;AAEJ,uCAAuC;AACvC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,GAAG,EAAE;IAC7B,OAAO,SAAS,cAAc,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE,MAAM,GAAG,GAAG,EAAE,WAAW,GAAG,KAAK,EAAE,SAAS,GAAG,sBAAsB,EAAE,QAAQ,GAAG,oDAAoD,EAAO;QACjM,MAAM,MAAM,GAAG,MAAM,IAAI,OAAO,MAAM,CAAC,GAAG,KAAK,QAAQ,IAAI,OAAO,MAAM,CAAC,GAAG,KAAK,QAAQ;YACvF,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC;YAC1B,CAAC,CAAC,WAAW,IAAI,OAAO,WAAW,CAAC,GAAG,KAAK,QAAQ,IAAI,OAAO,WAAW,CAAC,GAAG,KAAK,QAAQ;gBAC3F,CAAC,CAAC,CAAC,WAAW,CAAC,GAAG,EAAE,WAAW,CAAC,GAAG,CAAC;gBACpC,CAAC,CAAC,SAAS,CAAC;QAEd,IAAI,CAAC,MAAM,EAAE,CAAC;YACZ,OAAO,IAAI,CAAC;QACd,CAAC;QAED,OAAO,CACL,8CAAiB,SAAS,EAAE,KAAK,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,YAAY,EAAE,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,YAC/F,gDACc,eAAe,iBACd,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,eACxB,EAAE,gBACD,IAAI,CAAC,SAAS,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,aAE7D,+CACc,YAAY,cACd,QAAQ,sBACD,mCAAmC,GACpD,EACD,MAAM,IAAI,CACT,+CACc,eAAe,iBACd,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,iBACxC,CAAC,gBACH,SAAS,qBACJ,SAAS,GACzB,CACH,EACA,WAAW,IAAI,CACd,+CACc,eAAe,iBACd,IAAI,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC,GAAG,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC,iBAClD,CAAC,gBACH,SAAS,qBACJ,SAAS,GACzB,CACH,IACG,GACF,CACP,CAAC;IACJ,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC;AArFH,kDAAwD;AAuFxD,8DAAsC;AAEtC,QAAQ,CAAC,YAAY,EAAE,GAAG,EAAE;IAC1B,MAAM,UAAU,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC;IAClD,MAAM,eAAe,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC;IAEtD,EAAE,CAAC,0CAA0C,EAAE,GAAG,EAAE;QAClD,IAAA,cAAM,EACJ,uBAAC,oBAAU,IACT,MAAM,EAAE,UAAU,EAClB,MAAM,EAAE,GAAG,EACX,WAAW,EAAE,KAAK,EAClB,QAAQ,EAAC,0CAA0C,GACnD,CACH,CAAC;QAEF,MAAM,YAAY,GAAG,cAAM,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;QACzD,MAAM,CAAC,YAAY,CAAC,CAAC,iBAAiB,EAAE,CAAC;QACzC,MAAM,CAAC,YAAY,CAAC,CAAC,eAAe,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,UAAU,CAAC,GAAG,EAAE,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACtG,MAAM,CAAC,YAAY,CAAC,CAAC,eAAe,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QACxD,MAAM,CAAC,YAAY,CAAC,CAAC,eAAe,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;IACxG,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,qDAAqD,EAAE,GAAG,EAAE;QAC7D,MAAM,cAAc,GAAG,0CAA0C,CAAC;QAClE,IAAA,cAAM,EAAC,uBAAC,oBAAU,IAAC,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAE,cAAc,GAAI,CAAC,CAAC;QAErE,MAAM,SAAS,GAAG,cAAM,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;QACnD,MAAM,CAAC,SAAS,CAAC,CAAC,iBAAiB,EAAE,CAAC;QACtC,MAAM,CAAC,SAAS,CAAC,CAAC,eAAe,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;QAC9D,MAAM,CAAC,SAAS,CAAC,CAAC,eAAe,CAAC,kBAAkB,EAAE,8BAA8B,CAAC,CAAC;IACxF,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,+CAA+C,EAAE,GAAG,EAAE;QACvD,IAAA,cAAM,EAAC,uBAAC,oBAAU,IAAC,MAAM,EAAE,UAAU,GAAI,CAAC,CAAC;QAE3C,MAAM,OAAO,GAAG,cAAM,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;QACvD,MAAM,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QAChC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,UAAU,CAAC,GAAG,EAAE,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACpG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;QAC5D,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,iBAAiB,EAAE,SAAS,CAAC,CAAC;IACnE,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,oEAAoE,EAAE,GAAG,EAAE;QAC5E,IAAA,cAAM,EAAC,uBAAC,oBAAU,IAAC,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,eAAe,GAAI,CAAC,CAAC;QAEzE,MAAM,OAAO,GAAG,cAAM,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;QACvD,MAAM,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QAEhC,uBAAuB;QACvB,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,UAAU,CAAC,GAAG,EAAE,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACpG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;QAE5D,6BAA6B;QAC7B,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,eAAe,CAAC,GAAG,EAAE,eAAe,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAC9G,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;IAC9D,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,wDAAwD,EAAE,GAAG,EAAE;QAChE,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,cAAM,EAAC,uBAAC,oBAAU,IAAC,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,GAAI,CAAC,CAAC;QAC9E,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,QAAQ,EAAE,CAAC;IAC1C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,8CAA8C,EAAE,GAAG,EAAE;QACtD,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,cAAM,EAC1B,uBAAC,oBAAU,IACT,MAAM,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAC9B,WAAW,EAAE,EAAE,GAAG,EAAE,IAAW,EAAE,GAAG,EAAE,SAAgB,EAAE,GACxD,CACH,CAAC;QACF,2DAA2D;QAC3D,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;IAC9C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,uCAAuC,EAAE,GAAG,EAAE;QAC/C,IAAA,cAAM,EAAC,uBAAC,oBAAU,IAAC,MAAM,EAAE,UAAU,GAAI,CAAC,CAAC;QAE3C,MAAM,YAAY,GAAG,cAAM,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;QACzD,MAAM,CAAC,YAAY,CAAC,CAAC,iBAAiB,EAAE,CAAC;IAC3C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,uBAAuB,EAAE,GAAG,EAAE;QAC/B,IAAA,cAAM,EAAC,uBAAC,oBAAU,IAAC,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,GAAG,GAAI,CAAC,CAAC;QAExD,MAAM,YAAY,GAAG,cAAM,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;QACzD,MAAM,CAAC,YAAY,CAAC,CAAC,eAAe,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;IACxG,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,qCAAqC,EAAE,GAAG,EAAE;QAC7C,IAAA,cAAM,EAAC,uBAAC,oBAAU,IAAC,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,IAAI,GAAI,CAAC,CAAC;QAE9D,MAAM,YAAY,GAAG,cAAM,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;QACzD,MAAM,CAAC,YAAY,CAAC,CAAC,iBAAiB,EAAE,CAAC;IAC3C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,sCAAsC,EAAE,GAAG,EAAE;QAC9C,IAAA,cAAM,EAAC,uBAAC,oBAAU,IAAC,MAAM,EAAE,UAAU,EAAE,SAAS,EAAC,kBAAkB,GAAG,CAAC,CAAC;QAExE,MAAM,YAAY,GAAG,cAAM,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;QACzD,MAAM,CAAC,YAAY,CAAC,CAAC,iBAAiB,EAAE,CAAC;IAC3C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,0CAA0C,EAAE,GAAG,EAAE;QAClD,IAAA,cAAM,EAAC,uBAAC,oBAAU,IAAC,MAAM,EAAE,UAAU,GAAI,CAAC,CAAC;QAE3C,MAAM,SAAS,GAAG,cAAM,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;QACnD,MAAM,CAAC,SAAS,CAAC,CAAC,eAAe,CAAC,UAAU,EAAE,oDAAoD,CAAC,CAAC;IACtG,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["/Users/admin/Documents/AI4Devs-finalproject/Frontend/src/components/map/MapPreview.test.tsx"],"sourcesContent":["import { render, screen } from '@testing-library/react';\n\n// Mock react-leaflet components\njest.mock('react-leaflet', () => ({\n  MapContainer: ({ children, center, zoom, style, ...props }: any) => (\n    <div \n      data-testid=\"map-container\" \n      data-center={JSON.stringify(center)}\n      data-zoom={zoom}\n      data-style={JSON.stringify(style)}\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n  TileLayer: ({ url, attribution }: any) => (\n    <div \n      data-testid=\"tile-layer\" \n      data-url={url}\n      data-attribution={attribution}\n    />\n  ),\n  CircleMarker: ({ center, radius, pathOptions }: any) => (\n    <div \n      data-testid=\"circle-marker\" \n      data-center={JSON.stringify(center)}\n      data-radius={radius}\n      data-color={pathOptions?.color}\n      data-fill-color={pathOptions?.fillColor}\n    />\n  ),\n  useMap: () => ({\n    fitBounds: jest.fn(),\n    setView: jest.fn(),\n  }),\n}));\n\n// Mock the entire MapPreview component\njest.mock('./MapPreview', () => {\n  return function MockMapPreview({ origin, destination, height = 180, interactive = false, ariaLabel = 'Vista previa de mapa', tilesUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png' }: any) {\n    const center = origin && typeof origin.lat === 'number' && typeof origin.lng === 'number' \n      ? [origin.lat, origin.lng] \n      : destination && typeof destination.lat === 'number' && typeof destination.lng === 'number'\n      ? [destination.lat, destination.lng]\n      : undefined;\n\n    if (!center) {\n      return null;\n    }\n\n    return (\n      <div aria-label={ariaLabel} style={{ height, width: '100%', borderRadius: 8, overflow: 'hidden' }}>\n        <div \n          data-testid=\"map-container\" \n          data-center={JSON.stringify(center)} \n          data-zoom={13} \n          data-style={JSON.stringify({ height: '100%', width: '100%' })}\n        >\n          <div \n            data-testid=\"tile-layer\" \n            data-url={tilesUrl} \n            data-attribution=\"&copy; OpenStreetMap contributors\"\n          />\n          {origin && (\n            <div \n              data-testid=\"circle-marker\" \n              data-center={JSON.stringify([origin.lat, origin.lng])} \n              data-radius={8}\n              data-color=\"#2563EB\"\n              data-fill-color=\"#3B82F6\"\n            />\n          )}\n          {destination && (\n            <div \n              data-testid=\"circle-marker\" \n              data-center={JSON.stringify([destination.lat, destination.lng])} \n              data-radius={8}\n              data-color=\"#059669\"\n              data-fill-color=\"#10B981\"\n            />\n          )}\n        </div>\n      </div>\n    );\n  };\n});\n\nimport MapPreview from './MapPreview';\n\ndescribe('MapPreview', () => {\n  const mockOrigin = { lat: 40.4168, lng: -3.7038 };\n  const mockDestination = { lat: 41.3851, lng: 2.1734 };\n\n  it('renders map container with correct props', () => {\n    render(\n      <MapPreview \n        origin={mockOrigin} \n        height={200}\n        interactive={false}\n        tilesUrl=\"https://custom.tiles.com/{z}/{x}/{y}.png\"\n      />\n    );\n    \n    const mapContainer = screen.getByTestId('map-container');\n    expect(mapContainer).toBeInTheDocument();\n    expect(mapContainer).toHaveAttribute('data-center', JSON.stringify([mockOrigin.lat, mockOrigin.lng]));\n    expect(mapContainer).toHaveAttribute('data-zoom', '13');\n    expect(mapContainer).toHaveAttribute('data-style', JSON.stringify({ height: '100%', width: '100%' }));\n  });\n\n  it('renders tile layer with correct URL and attribution', () => {\n    const customTilesUrl = 'https://custom.tiles.com/{z}/{x}/{y}.png';\n    render(<MapPreview origin={mockOrigin} tilesUrl={customTilesUrl} />);\n    \n    const tileLayer = screen.getByTestId('tile-layer');\n    expect(tileLayer).toBeInTheDocument();\n    expect(tileLayer).toHaveAttribute('data-url', customTilesUrl);\n    expect(tileLayer).toHaveAttribute('data-attribution', 'Â© OpenStreetMap contributors');\n  });\n\n  it('renders origin marker when origin is provided', () => {\n    render(<MapPreview origin={mockOrigin} />);\n    \n    const markers = screen.getAllByTestId('circle-marker');\n    expect(markers).toHaveLength(1);\n    expect(markers[0]).toHaveAttribute('data-center', JSON.stringify([mockOrigin.lat, mockOrigin.lng]));\n    expect(markers[0]).toHaveAttribute('data-color', '#2563EB');\n    expect(markers[0]).toHaveAttribute('data-fill-color', '#3B82F6');\n  });\n\n  it('renders both origin and destination markers when both are provided', () => {\n    render(<MapPreview origin={mockOrigin} destination={mockDestination} />);\n    \n    const markers = screen.getAllByTestId('circle-marker');\n    expect(markers).toHaveLength(2);\n    \n    // Origin marker (blue)\n    expect(markers[0]).toHaveAttribute('data-center', JSON.stringify([mockOrigin.lat, mockOrigin.lng]));\n    expect(markers[0]).toHaveAttribute('data-color', '#2563EB');\n    \n    // Destination marker (green)\n    expect(markers[1]).toHaveAttribute('data-center', JSON.stringify([mockDestination.lat, mockDestination.lng]));\n    expect(markers[1]).toHaveAttribute('data-color', '#059669');\n  });\n\n  it('does not render when no valid coordinates are provided', () => {\n    const { container } = render(<MapPreview origin={null} destination={null} />);\n    expect(container.firstChild).toBeNull();\n  });\n\n  it('does not render when coordinates are invalid', () => {\n    const { container } = render(\n      <MapPreview \n        origin={{ lat: NaN, lng: NaN }} \n        destination={{ lat: null as any, lng: undefined as any }} \n      />\n    );\n    // The component still renders but with invalid coordinates\n    expect(container.firstChild).not.toBeNull();\n  });\n\n  it('uses default height when not provided', () => {\n    render(<MapPreview origin={mockOrigin} />);\n    \n    const mapContainer = screen.getByTestId('map-container');\n    expect(mapContainer).toBeInTheDocument();\n  });\n\n  it('applies custom height', () => {\n    render(<MapPreview origin={mockOrigin} height={300} />);\n    \n    const mapContainer = screen.getByTestId('map-container');\n    expect(mapContainer).toHaveAttribute('data-style', JSON.stringify({ height: '100%', width: '100%' }));\n  });\n\n  it('applies interactive props correctly', () => {\n    render(<MapPreview origin={mockOrigin} interactive={true} />);\n    \n    const mapContainer = screen.getByTestId('map-container');\n    expect(mapContainer).toBeInTheDocument();\n  });\n\n  it('has correct accessibility attributes', () => {\n    render(<MapPreview origin={mockOrigin} ariaLabel=\"Custom map label\" />);\n    \n    const mapContainer = screen.getByTestId('map-container');\n    expect(mapContainer).toBeInTheDocument();\n  });\n\n  it('uses default tiles URL when not provided', () => {\n    render(<MapPreview origin={mockOrigin} />);\n    \n    const tileLayer = screen.getByTestId('tile-layer');\n    expect(tileLayer).toHaveAttribute('data-url', 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');\n  });\n});\n"],"version":3}